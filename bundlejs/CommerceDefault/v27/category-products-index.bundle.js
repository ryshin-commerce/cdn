"use strict";function TabPages(){this.Extend=function(t,e,a){var i=t.dataset.activeTabNumber;this.SelectedTabNumber=+i||-1,this.NavElement=t,this.Tabs=e,this.TabContains=a,this.Process()},this.Process=function(){for(var i=this,t=0;t<this.Tabs.length;t++)this.Tabs[t].addEventListener("click",function(t){if(t.currentTarget.dataset.tabUrl&&history.replaceState(null,null,t.currentTarget.dataset.tabUrl),i.SelectedTabNumber=+t.currentTarget.dataset.tab||-1,i.NavElement.dataset.activeTabNumber=i.SelectedTabNumber,t.currentTarget.dataset.callback){for(var e=null,a=0;a<i.TabContains.length;a++)if(i.TabContains[a].dataset.tabContent===t.currentTarget.dataset.tab){e=i.TabContains[a];break}Site.GetFunction(t.currentTarget.dataset.callback,["tabNumber","tabContainerElement"]).apply(t.currentTarget,[i.SelectedTabNumber,e])}})},this.Init=function(t){var e,a=document.querySelector(t);a&&(e=a.parentNode.querySelectorAll("[data-tab]"),t=a.parentNode.querySelectorAll("[data-tab-content]"),this.Extend(a,e,t))}}var btnSearchProductName;function flashsaleCoutDown(t){var e=document.querySelector(t);if(e)for(var a=e.querySelectorAll("[data-flash-deal-count-down]"),i=0;i<a.length;i++){var o=Site.FindParent(a[i],"_p-product-widget");checkTimeCountDown(t+" [data-product-id='"+o.dataset.productId+"']")}}function loadProductSlider(t,e,a,i,o){new Swiper(t,{spaceBetween:5,slidesPerView:i,slidesPerColumn:o,navigation:{prevEl:e,nextEl:a}})}function loadSuggestProducts(){var t=document.querySelector("#formLazySuggestProduct #inputContainer");if(t){var e=LocalStorageHelper.Get(LocalStorageNamesEnum.UserCategoryList).sort(function(t,e){return 5*t.InOrderCount+3*t.CompleteCount+2*t.AddToCartCount+t.ViewCount>5*e.InOrderCount+3*e.CompleteCount+2*e.AddToCartCount+e.ViewCount?1:-1});e.length=Math.min(3,e.length);for(var a="",i=0;i<e.length;i++)a+='<input class="hide" type="text" name="CategoryLogModels['+i+'].CategoryId" value="'+e[i].CategoryId+'">'+('<input class="hide" type="number" name="CategoryLogModels['+i+'].ViewCount" value="'+e[i].ViewCount+'">')+('<input class="hide" type="number" name="CategoryLogModels['+i+'].AddToCartCount" value="'+e[i].AddToCartCount+'">')+('<input class="hide" type="number" name="CategoryLogModels['+i+'].InOrderCount" value="'+e[i].InOrderCount+'">')+('<input class="hide" type="number" name="CategoryLogModels['+i+'].CompleteCount" value="'+e[i].CompleteCount+'">');t.innerHTML=a,document.getElementById("btnReloadSuggestProduct").click()}}function loadUserViewedProduct(){var t=LocalStorageHelper.Get(LocalStorageNamesEnum.ViewProductClassificationIds);if(t&&t.length){var e=document.querySelector("#productViewedContainer"),a=t.length;e.dataset.itemCount&&(a=Math.min(a,e.dataset.itemCount));for(var i=0;i<a;i++){var o=t[i],r='<a href="[ProductUrl]" title="[ProductName]" class="_image-wrap -tablet-margin-bottom rounded-4 border-1 solid border-silver padding-5"> <img alt="[ProductName]" loading="lazy" class="r-lazy" src="[ProductThumnailUrl]"></a>';r=(r=(r=r.replace(/\[ProductUrl\]/g,o.ProductUrl)).replace(/\[ProductName\]/g,o.ProductName)).replace(/\[ProductThumnailUrl\]/g,o.ProductThumnailUrl),o=Site.HtmlToElement(r),e.appendChild(o[0])}}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _createClass(t,e,a){return e&&_defineProperties(t.prototype,e),a&&_defineProperties(t,a),t}document.addEventListener("DOMContentLoaded",function(){}),document.addEventListener("DOMContentLoaded",function(){loadUserViewedProduct()});var listQuantities,chkOutOfStock,txtQuantity,attribute1Items,attribute2Items,productClassificationId,dataPrice,newestPostsContainer,btnReloadListProductByClassification,btnReloadListProductLazy,inputClassificationForms,inputProductAttributeForms,activeCategoryAttributes,curentPageClassification,curentPageProductAttribute,pageSizeFields,pagingProduct,Pagination=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"Extend",value:function(t){t=t||{},this.code="",this.size=t.size?parseInt(t.size):0,this.page=t.page?parseInt(t.page):0,this.step=t.step?parseInt(t.step):0,this.tagName=t.tagName||"a",this.attribute=t.attribute||"",this.hrefToken=t.hrefToken||"",this.showValue=!!t.showValue||!1,this.submitFromAttributes=null!=t.form?'form="'+t.form+'" type=submit name="PageNumber"':"",this.hover=t.hover||"",this.itemClassName="",t.hover&&(this.itemClassName+=" class='hover-tooltip' "),this.callBack=t.callBack}},{key:"Add",value:function(t,e){for(var a=t;a<e;a++){var i=this.hrefToken?'href="'+this.hrefToken.replace("{PAGE}",a)+'"':"",o=this.showValue?'value="'+a+'"':"",r=this.hover?"<span class='tooltip top'>"+this.hover.replace("{PAGE}",a)+"</span>":"";this.code+="<li"+this.itemClassName+"><"+this.tagName+" "+this.submitFromAttributes+" "+i+" "+o+" "+this.attribute+"data-value="+a+" >"+a+"</"+this.tagName+">"+r+"</li>"}}},{key:"Last",value:function(){var t=this.hrefToken?'href="'+this.hrefToken.replace("{PAGE}",1<this.size?this.size:1)+'"':"",e=this.showValue?'value="'+(1<this.size?this.size:1)+'"':"",a=this.hover?"<span class='tooltip top'>"+this.hover.replace("{PAGE}",1<this.size?this.size:1)+"</span>":"";this.code+="<i>...</i><li data-last "+this.itemClassName+" ><"+this.tagName+" "+this.submitFromAttributes+" "+t+" "+e+" "+this.attribute+"data-value="+this.size+">"+this.size+"</"+this.tagName+">"+a+"</li>"}},{key:"First",value:function(){var t=this.hrefToken?'href="'+this.hrefToken.replace("{PAGE}",1)+'"':"",e=this.showValue?'value="1"':"",a=this.hover?"<span class='tooltip top'>"+this.hover.replace("{PAGE}",1)+"</span>":"";this.code+="<li data-first "+this.itemClassName+"><"+this.tagName+" "+this.submitFromAttributes+" "+t+" "+e+" "+this.attribute+" data-value=1>1</"+this.tagName+">"+a+"</li><i>...</i>"}},{key:"Click",value:function(t){this.page=+t,this.Start(),this.callBack&&new Function("pageNumber",this.callBack)(--this.page)}},{key:"Prev",value:function(){this.page--,this.page<1&&(this.page=1),this.Start()}},{key:"Next",value:function(){this.page++,this.page>this.size&&(this.page=this.size),this.Start()}},{key:"Bind",value:function(){for(var t=this,e=this.e.getElementsByTagName(this.tagName),a=0;a<e.length;a++)+e[a].innerHTML===this.page&&(e[a].parentElement.className="current"),this.submitFromAttributes||e[a].addEventListener("click",function(){t.Click(this.value)},!1)}},{key:"Finish",value:function(){this.e.innerHTML=this.code,this.code="",this.Bind()}},{key:"Start",value:function(){this.size<2*this.step+6?this.Add(1,this.size+1):this.page<2*this.step+1?(this.Add(1,2*this.step+4),this.Last()):this.page>this.size-2*this.step?(this.First(),this.Add(this.size-2*this.step-2,this.size+1)):(this.First(),this.Add(this.page-this.step,this.page+this.step+1),this.Last()),this.Finish()}},{key:"Buttons",value:function(t){var e=this,t=t.getElementsByTagName(this.tagName);t[0].addEventListener("click",function(){e.Prev()},!1),t[1].addEventListener("click",function(){e.Next()},!1)}},{key:"Create",value:function(t){var e=this.hrefToken?'href="'+this.hrefToken.replace("{PAGE}",1<this.page?this.page-1:1)+'"':"",a=this.hrefToken?'href="'+this.hrefToken.replace("{PAGE}",this.size>this.page?this.page+1:this.size)+'"':"",i=this.showValue?'value="'+(1<this.page?this.page-1:1)+'"':"",o=this.showValue?'value="'+(1<this.page?this.page-1:1)+'"':"",a=["<li"+this.itemClassName+"><"+this.tagName+' class="pre" '+this.submitFromAttributes+" "+i+" "+this.attribute+" "+e+" data-value="+(1<this.page?this.page:1)+" >&#9668;</"+this.tagName+"></li>","<span></span>","<li"+this.itemClassName+"><"+this.tagName+' class="next" '+this.submitFromAttributes+" "+o+" "+this.attribute+" "+a+" data-value="+(this.size>this.page?this.page+1:this.size)+" >&#9658;</"+this.tagName+"></li>"];t.innerHTML=a.join(""),this.e=t.getElementsByTagName("span")[0],this.Buttons(t)}},{key:"Init",value:function(t,e){this.Extend(e),this.Create(t),this.Start()}},{key:"Run",value:function(t){for(var e=(t?document.querySelector(t):document).getElementsByClassName("_p-gination"),a=0;a<e.length;a++){var i=e[a];this.Init(i,i.dataset)}}}]),t}(),lockScrollNexProduct=!1;function loadProductWidget(){}function reloadNextProduct(){var t,e;!pagingProduct.page||lockScrollNexProduct||pagingProduct.page>=pagingProduct.size||(lockScrollNexProduct=!0,activeCategoryAttributes?(e="frmLoadComplexCategoryProductByCategoryAttributes",curentPageProductAttribute.value=pagingProduct.page+1):(e="frmLoadComplexCategoryProductByClassification",curentPageClassification.value=pagingProduct.page+1),t=pagingProduct.page+1,console.log(t),t=document.getElementById(e),(e=new FormData(t)).append("productWigetOnly","True"),AjaxRequest.SendFormData("POST",t.action,e,function(t,e){for(var a=document.querySelector("._flex-container"),i=Site.HtmlToElement(t),o=0;o<i.length;o++)a.appendChild(i[o]),loadFlashSaleProductWidget(i[o]);setTimeout(function(){lockScrollNexProduct=!1,pagingProduct.Next()},1e3)},function(){setTimeout(function(){lockScrollNexProduct=!1},1e3)}))}function initBrand(){document.querySelector("[data-brand]");for(var t=document.querySelectorAll("[name=sortBy]"),e=0;e<t.length;e++)t[e].addEventListener("change",function(t){Site.ClosePopup(),t.target.checked&&(activeCategoryAttributes?(document.querySelector("#frmLoadComplexCategoryProductByCategoryAttributes [name=ProductSortbyEnum]").value=t.target.value,document.querySelector("#frmLoadComplexCategoryProductByCategoryAttributes [name=CurentPage]").value=0,activeCategoryAttributes=!0,btnReloadListProductLazy.click()):(document.querySelector("#frmLoadComplexCategoryProductByCategoryAttributes [name=ProductSortbyEnum]").value=t.target.value,document.querySelector("#frmLoadComplexCategoryProductByClassification [name=CurentPage]").value=0,activeCategoryAttributes=!1,btnReloadListProductByClassification.click()))})}function init(){activeCategoryAttributes=!0,btnReloadListProductByClassification=document.getElementById("btnReloadListProductByClassification"),btnReloadListProductLazy=document.getElementById("btnReloadListProductLazy"),inputClassificationForms=document.querySelectorAll("#frmLoadComplexCategoryProductByClassification [name^=AttributeModels]"),inputProductAttributeForms=document.querySelectorAll("#frmLoadComplexCategoryProductByCategoryAttributes [name^=AttributeModels]"),pageSizeFields=document.querySelectorAll("[name=PageSize]"),curentPageClassification=document.querySelector("#frmLoadComplexCategoryProductByClassification [name=CurentPage]"),curentPageProductAttribute=document.querySelector("#frmLoadComplexCategoryProductByCategoryAttributes [name=CurentPage]")}function initNoUiSlider(){document.querySelectorAll("._id-nouirange").forEach(function(t){var e=document.createElement("div"),a=t.querySelector("._id-min"),i=t.querySelector("._id-max");a.style.display="none ",i.style.display="none ";var o=a.getAttribute("min"),r=i.getAttribute("max");t.appendChild(e),t.noUiSlider=noUiSlider.create(e,{start:[a.value,i.value],connect:!0,step:1,tooltips:[WNumbHelper.longNumberFormatShort,WNumbHelper.longNumberFormatShort],range:{min:Number(o),max:Number(r)}}),e.noUiSlider.on("change",function(t){a.value=String(t[0]),i.value=String(t[1]),a.dispatchEvent(new Site.CreateEvent("change"))})})}function innitCheckboxFilter(){for(var t=0;t<inputClassificationForms.length;t++)inputClassificationForms[t].addEventListener("change",function(t){loadDefaultValuesGroup2(),document.querySelector("#frmLoadComplexCategoryProductByClassification [name=CurentPage]").value=0,btnReloadListProductByClassification.click(),activeCategoryAttributes=!1,console.log("Group 1 change")});for(var e=0;e<inputProductAttributeForms.length;e++)inputProductAttributeForms[e].addEventListener("change",function(t){loadDefaultValuesGroup1(),document.querySelector("#frmLoadComplexCategoryProductByCategoryAttributes [name=CurentPage]").value=0,btnReloadListProductLazy.click(),activeCategoryAttributes=!0,console.log("Group 2 change")})}function loadDefaultValuesGroup2(){document.querySelectorAll("#frmLoadComplexCategoryProductByCategoryAttributes input[type=checkbox]").forEach(function(t){t.checked=!1}),document.querySelectorAll("#frmLoadComplexCategoryProductByCategoryAttributes ._id-nouirange").forEach(function(t){t.noUiSlider.reset()})}function loadDefaultValuesGroup1(){document.querySelectorAll("#frmLoadComplexCategoryProductByClassification input[type=checkbox]").forEach(function(t){t.checked=!1}),document.querySelectorAll("#frmLoadComplexCategoryProductByClassification ._id-nouirange").forEach(function(t){t.noUiSlider.reset()})}function reloadListProductComplete(){(pagingProduct=new Pagination).Run(),submitProductWidgetAction("._id-listProductPagings");for(var t=document.querySelectorAll("#pagination button"),e=0;e<t.length;e++)t[e].addEventListener("click",function(t){activeCategoryAttributes=activeCategoryAttributes?(curentPageProductAttribute.value=t.target.dataset.value,btnReloadListProductLazy.click(),!0):(curentPageClassification.value=t.target.dataset.value,btnReloadListProductByClassification.click(),!1)});for(var a=document.querySelectorAll("[data-page-size]"),e=0;e<a.length;e++)a[e].addEventListener("click",function(t){for(var e=0;e<pageSizeFields.length;e++)pageSizeFields[e].value=t.target.dataset.pageSize;activeCategoryAttributes?(document.querySelector("#frmLoadComplexCategoryProductByCategoryAttributes [name=CurentPage]").value=0,activeCategoryAttributes=!0,btnReloadListProductLazy.click()):(activeCategoryAttributes=!1,document.querySelector("#frmLoadComplexCategoryProductByClassification [name=CurentPage]").value=0,btnReloadListProductByClassification.click())})}document.addEventListener("DOMContentLoaded",function(){init(),document.querySelector("#frmLoadComplexCategoryProductByClassification [data-active-tab-number]")&&(new TabPages).Init("#frmLoadComplexCategoryProductByClassification [data-active-tab-number]"),document.querySelector("#frmLoadComplexCategoryProductByCategoryAttributes [data-active-tab-number]")&&(new TabPages).Init("#frmLoadComplexCategoryProductByCategoryAttributes [data-active-tab-number]"),Site.BindingOnCroll(),innitCheckboxFilter(Site.IsDesktopBackend()),Site.IsDesktopBackend()||document.getElementById("btnMobileSubmitFake").addEventListener("click",function(){activeCategoryAttributes=activeCategoryAttributes?(btnReloadListProductLazy.click(),!0):(btnReloadListProductByClassification.click(),!1),Site.ClosePopup()}),initNoUiSlider(),reloadListProductComplete(),initBrand(),loadSuggestProducts()});