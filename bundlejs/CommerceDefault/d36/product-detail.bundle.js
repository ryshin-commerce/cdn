class Pagination{Extend(e){e=e||{},this.code="",this.size=e.size?parseInt(e.size):0,this.page=e.page?parseInt(e.page):0,this.step=e.step?parseInt(e.step):0,this.tagName=e.tagName||"a",this.attribute=e.attribute||"",this.hrefToken=e.hrefToken||"",this.showValue=!!e.showValue||!1,this.submitFromAttributes=null!=e.form?'form="'+e.form+'" type=submit name="PageNumber"':"",this.hover=e.hover||"",this.itemClassName="",e.hover&&(this.itemClassName+=" class='hover-tooltip' "),this.callBack=e.callBack}Add(e,t){for(let a=e;a<t;a++){const e=this.hrefToken?'href="'+this.hrefToken.replace("{PAGE}",a)+'"':"",t=this.showValue?'value="'+a+'"':"",i=this.hover?"<span class='tooltip top'>"+this.hover.replace("{PAGE}",a)+"</span>":"";this.code+="<li"+this.itemClassName+"><"+this.tagName+" "+this.submitFromAttributes+" "+e+" "+t+" "+this.attribute+"data-value="+a+" >"+a+"</"+this.tagName+">"+i+"</li>"}}Last(){const e=this.hrefToken?'href="'+this.hrefToken.replace("{PAGE}",this.size>1?this.size:1)+'"':"",t=this.showValue?'value="'+(this.size>1?this.size:1)+'"':"",a=this.hover?"<span class='tooltip top'>"+this.hover.replace("{PAGE}",this.size>1?this.size:1)+"</span>":"";this.code+="<i>...</i><li data-last "+this.itemClassName+" ><"+this.tagName+" "+this.submitFromAttributes+" "+e+" "+t+" "+this.attribute+"data-value="+this.size+">"+this.size+"</"+this.tagName+">"+a+"</li>"}First(){const e=this.hrefToken?'href="'+this.hrefToken.replace("{PAGE}",1)+'"':"",t=this.showValue?'value="1"':"",a=this.hover?"<span class='tooltip top'>"+this.hover.replace("{PAGE}",1)+"</span>":"";this.code+="<li data-first "+this.itemClassName+"><"+this.tagName+" "+this.submitFromAttributes+" "+e+" "+t+" "+this.attribute+" data-value=1>1</"+this.tagName+">"+a+"</li><i>...</i>"}Click(e){(this.page=+e,this.Start(),this.callBack)&&new Function("pageNumber",this.callBack)(--this.page)}Prev(){this.page--,this.page<1&&(this.page=1),this.Start()}Next(){this.page++,this.page>this.size&&(this.page=this.size),this.Start()}Bind(){var e=this;const t=this.e.getElementsByTagName(this.tagName);for(let a=0;a<t.length;a++)+t[a].innerHTML===this.page&&(t[a].parentElement.className="current"),this.submitFromAttributes||t[a].addEventListener("click",function(){e.Click(this.value)},!1)}Finish(){this.e.innerHTML=this.code,this.code="",this.Bind()}Start(){this.size<2*this.step+6?this.Add(1,this.size+1):this.page<2*this.step+1?(this.Add(1,2*this.step+4),this.Last()):this.page>this.size-2*this.step?(this.First(),this.Add(this.size-2*this.step-2,this.size+1)):(this.First(),this.Add(this.page-this.step,this.page+this.step+1),this.Last()),this.Finish()}Buttons(e){var t=this;const a=e.getElementsByTagName(this.tagName);a[0].addEventListener("click",function(){t.Prev()},!1),a[1].addEventListener("click",function(){t.Next()},!1)}Create(e){const t=this.hrefToken?'href="'+this.hrefToken.replace("{PAGE}",this.page>1?this.page-1:1)+'"':"",a=this.hrefToken?'href="'+this.hrefToken.replace("{PAGE}",this.size>this.page?this.page+1:this.size)+'"':"",i=this.showValue?'value="'+(this.page>1?this.page-1:1)+'"':"",n=this.showValue?'value="'+(this.page>1?this.page-1:1)+'"':"",o=["<li"+this.itemClassName+"><"+this.tagName+' class="pre" '+this.submitFromAttributes+" "+i+" "+this.attribute+" "+t+" data-value="+(this.page>1?this.page:1)+" >&#9668;</"+this.tagName+"></li>","<span></span>","<li"+this.itemClassName+"><"+this.tagName+' class="next" '+this.submitFromAttributes+" "+n+" "+this.attribute+" "+a+" data-value="+(this.size>this.page?this.page+1:this.size)+" >&#9658;</"+this.tagName+"></li>"];e.innerHTML=o.join(""),this.e=e.getElementsByTagName("span")[0],this.Buttons(e)}Init(e,t){this.Extend(t),this.Create(e),this.Start()}Run(e){const t=e?document.querySelector(e).getElementsByClassName("_p-gination"):document.getElementsByClassName("_p-gination");for(let e=0;e<t.length;e++){const a=t[e];this.Init(a,a.dataset)}}}function FileUpload(){this.InputElement=null,this.PreviewBoxElement=null,this.CurentImageBox=null,this.Form=null,this.MaxFile=null,this.StoredFiles=[],this.CurentFiles=[],this.CurentPreviewImages=[],this.Extend=function(e,t,a,i,n,o,s,r,l,c,u,d){this.InputElement=i,this.AcceptExtention=i.accept.split(","),this.PreviewBoxElement=o,this.CurentImageBox=n,this.Form=s,this.UniqueControlName=u?"CurentFilePaths":"NewFiles"+u,this.MaxFile=r||2,this.MaxFileSize=d||5242880,this.InputChangeCallBack=void 0!==l?l:null,this.InputElement.addEventListener("change",this.InputChange),this.InputElement.fileUpload=this,this.FileReader=new FileReader,this.IsCreateInputName=c||!1,this.HostCdn=e||"",this.CurentFiles=t||[],this.CurentPreviewImages=a||[],this.Process()},this.Process=function(){if(this.CurentImageBox){var e=this;for(let u=0;u<this.CurentFiles.length;u++){var t=this.CurentFiles[u],a=this.CurentPreviewImages[u],i=document.createElement("div");i.className="col-3 gutter-10 _p-item text-center";var n=document.createElement("figure");n.className="_max-height-200 relative hover-children-show";var o=document.createElement("button");o.className="absolute hide tablet-show -border width-100 height-100 _fill-silver-opacity text-strong",o.innerText="CLICK ĐỂ XÓA",o.type="button",o.dataset.file=t,o.dataset.notClose="I",o.addEventListener("click",function(t){e.RemoveCurentFile(t,e.InputElement)});var s,r,l=t.substring(t.lastIndexOf("/")+1),c=l.substring(l.indexOf(".")+1);if(("."+c).match(".jpg,.png,.svg,.gif,.jfif,.webp,.csv".replace(new RegExp(",","g"),"|"))?s="<img class='_max-width-100-percent'   onerror='this.src=\"/images/shared/no-image.svg\"'   src='"+e.HostCdn+"/"+a+"' alt='"+l+"' data-file='"+l+"' /><figcaption class='padding-5 text-center _text-ellipsis'>"+l+"</figcaption>":(s="<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 512 512' version='1'><path d='M128 0c-18 0-32 14-32 32v448c0 18 14 32 32 32h320c18 0 32-14 32-32V128L352 0H128z' fill='#e2e5e7'/><path d='M384 128h96L352 0v96c0 18 14 32 32 32z' fill='#b0b7bd'/><path fill='#cad1d8' d='M480 224l-96-96h96z'/><path d='M416 416c0 9-7 16-16 16H48c-9 0-16-7-16-16V256c0-9 7-16 16-16h352c9 0 16 7 16 16v160z' fill='#f15642'/><path d='M400 432H96v16h304c9 0 16-7 16-16v-16c0 9-7 16-16 16z' fill='#cad1d8'/><text y='375' x='212' style='line-height:1.25;text-align:center' font-weight='400' font-size='147' font-family='sans-serif' letter-spacing='0' word-spacing='0' text-anchor='middle' stroke-width='3'><tspan style='line-height:1.25;-inkscape-font-specification:'monospace Bold';text-align:center' y='375' x='212' font-weight='700' font-family='monospace' fill='#fff'>"+c+"</tspan></text></svg>",(r=document.createElement("div")).innerHTML="<div class='row text-center _text-ellipsis'><a target='_blank' href='"+e.HostCdn+"/"+a+"'>"+l+"</a></div>"),e.IsCreateInputName)s+="<input type='text' class='_hidden'    name='"+e.UniqueControlName+"' value="+t+(e.Form?" form='"+e.Form.id+"'":"")+"></input>";n.innerHTML=s,n.insertBefore(o,n.childNodes[0]),i.appendChild(n),r&&i.appendChild(r),e.CurentImageBox.appendChild(i)}}},this.InputChange=function(e){var t=e.target.fileUpload,a=e.target.files,i=Array.prototype.slice.call(a);t.PreviewBoxElement.innerHTML="",t.StoredFiles=[];for(var n=0;n<i.length;n++){var o=i[n];if(o.size>t.MaxFileSize)Site.NotifyFormFailed("Lỗi","File không được lớn hơn "+t.MaxFileSize/1048576+" mb");else if(t.StoredFiles.push(o),t.PreviewBoxElement===t.CurentImageBox&&(t.CurentFiles=[],t.CurentImageBox.innerHTML=""),t.StoredFiles.length+t.CurentFiles.length<=t.MaxFile){var s=new FileReader;s.onload=function(e){var a=event.target,i=document.createElement("div");i.className="gutter-10 _p-item";var n=document.createElement("figure");n.className="_max-height-200 relative hover-children-show";var o,s=document.createElement("button");(s.className="absolute hide -border width-100 height-100 _fill-silver-opacity text-strong",s.type="button",s.innerText="CLICK ĐỂ XÓA",s.dataset.file=a.name,s.dataset.notClose="I",s.addEventListener("click",function(e){t.RemoveFile(e,t.InputElement)}),a.fileType.match("image.*"))?o="<img class='width-100 _max-width-100-percent' src='"+e.target.result+"' alt='"+a.name+"' data-file='"+a.name+"' /><figcaption class='padding-5 text-center _text-ellipsis'>("+a.size%1e3+" kb) "+a.name+"</figcaption>":o="<svg xmlns='http://www.w3.org/2000/svg' width='100' height='100' viewBox='0 0 512 512' version='1'><path d='M128 0c-18 0-32 14-32 32v448c0 18 14 32 32 32h320c18 0 32-14 32-32V128L352 0H128z' fill='#e2e5e7'/><path d='M384 128h96L352 0v96c0 18 14 32 32 32z' fill='#b0b7bd'/><path fill='#cad1d8' d='M480 224l-96-96h96z'/><path d='M416 416c0 9-7 16-16 16H48c-9 0-16-7-16-16V256c0-9 7-16 16-16h352c9 0 16 7 16 16v160z' fill='#f15642'/><path d='M400 432H96v16h304c9 0 16-7 16-16v-16c0 9-7 16-16 16z' fill='#cad1d8'/><text y='375' x='212' style='line-height:1.25;text-align:center' font-weight='400' font-size='147' font-family='sans-serif' letter-spacing='0' word-spacing='0' text-anchor='middle' stroke-width='3'><tspan style='line-height:1.25;-inkscape-font-specification:'monospace Bold';text-align:center' y='375' x='212' font-weight='700' font-family='monospace' fill='#fff'>"+a.name.substring(a.name.indexOf(".")+1)+"</tspan></text></svg><figcaption class='padding-5 text-center _text-ellipsis'>("+a.size%1e3+" kb) "+a.name+"</figcaption>";t.IsCreateInputName&&(o+="<input type='text' class='_hidden' name='"+t.UniqueControlName+"[]' value="+a.name+(t.Form?" form='"+t.Form.id+"'":"")+"></input>");n.innerHTML=o,n.insertBefore(s,n.childNodes[0]),i.appendChild(n),t.PreviewBoxElement.appendChild(i)},s.size=o.size,s.fileType=o.type,s.name=o.name,s.readAsDataURL(o)}}t.InputChangeCallBack&&t.InputChangeCallBack(t.StoredFiles)},this.RemoveCurentFile=function(e){for(var t=e.target.dataset.file,a=0;a<this.CurentFiles.length;a++)if(this.CurentFiles[a]===t){this.CurentFiles.splice(a,1);break}Site.FindParent(e.target,"_p-item").remove()},this.RemoveFile=function(e,t){for(var a=e.target.dataset.file,i=0;i<this.StoredFiles.length;i++)if(this.StoredFiles[i].name===a){this.StoredFiles.splice(i,1);break}Site.FindParent(e.target,"_p-item").remove(),Site.ClearInputFile(t)},this.Init=function(e,t,a,i,n,o,s,r,l,c,u,d){var m=document.querySelector(i),h=document.querySelector(o),p=document.querySelector(n),g=document.querySelector(s);null!=m&&null!=h||console.warn(i+" or "+h+": NULL"),this.Extend(e,t,a,m,p,h,g,r,l,c,u,d)}}var galleryThumbs,galleryTop,btnSearchProductName,imageCaptchaQuestion,fileUploadRatingQuestion,imputDocumentFileQuestion,inputUserNameQuestion,inputEmailQuestion,btnRemoveAnwerFor,spanUserName,inputParentId,textArea,listQuantities,chkOutOfStock,txtQuantity,attribute1Items,attribute2Items,productClassificationId,dataPrice,newestPostsContainer,activeProductClass,subscribeButton,discountPercentEle,flashSaleContainer,dataCountEle,dataProcessBarEle,dataDelPrice,idWholesaleInfo;function SlideToProductClass(e){var t="class-"+e,a=Array.from(galleryTop.slides).filter(e=>!!e.classList&&e.classList.contains(t));if(a[0]){a.sort((e,t)=>Array.from(e.classList).filter(e=>!!e&&e.startsWith("class-")).length-Array.from(t.classList).filter(e=>!!e&&e.startsWith("class-")).length);var i=Array.from(galleryTop.slides).findIndex(e=>e.dataset.slide===a[0].dataset.slide);galleryTop.slideTo(i)}}function LoadSwiperDefault(){galleryTop=new Swiper(".gallery-top",{slidesPerView:1,autoHeight:!0,centeredSlides:!1,spaceBetween:20,preloadImages:!0,lazy:{loadPrevNext:!0},pagination:".swiper-pagination",paginationType:"fraction",navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}});var e=document.querySelector(".gallery-thumbs");if(e){if((galleryThumbs=new Swiper(".gallery-thumbs",{spaceBetween:20,centeredSlides:!0,slidesPerView:e.dataset.itemShow||4,touchRatio:.2,slideToClickedSlide:!0}))instanceof Array)for(var t=0;t<galleryThumbs.length;t++)galleryThumbs[t].imagesToLoad.length>0&&(galleryTop[t].controller.control=galleryThumbs,galleryThumbs[t].controller.control=galleryTop);else galleryTop.controller.control=galleryThumbs,galleryThumbs.controller.control=galleryTop;galleryThumbs.update()}}function _LoadImageSwipe(e,t){var a,i=document.querySelectorAll(".pswp")[0],n=document.querySelector(e),o=[],s=document.querySelectorAll(e+" .gallery-top .swiper-slide > [itemprop=contentUrl]"),r=document.querySelectorAll(e+" .gallery-top [itemprop=thumbnail] ._p-slide-image"),l=document.querySelector(e+" .swiper-slide-active");l||console.warn("ko có thumb dùng top gallery");for(var c=0;c<s.length;c++)(a={src:r[c].dataset.src||r[c].src||r[c].src,w:r[c].width,h:r[c].height,alt:r[c].alt,author:n.dataset.author}).msrc=l.getAttribute("src"),a.el=l,a.title=n.dataset.seo,a.m={src:r[c].dataset.src||r[c].src||r[c].src,w:r[c].width,alt:r[c].alt,h:r[c].height,author:n.dataset.author},a.o={src:s[c].content,w:+s[c].parentElement.querySelector("[itemprop=width]").content,alt:r[c].alt,h:+s[c].parentElement.querySelector("[itemprop=height]").content,author:n.dataset.author},o.push(a);var u,d,m={index:t,history:!1,focus:!1,hideAnimationDuration:0,getThumbBoundsFn:function(e){var t=o[e].el,a=window.pageYOffset||document.documentElement.scrollTop,i=t.getBoundingClientRect();return{x:i.left,y:i.top+a,w:i.width}},galleryUID:e},h=new PhotoSwipe(i,PhotoSwipeUI_Default,o,m),p=!1,g=!0;h.listen("beforeResize",function(){var e=window.devicePixelRatio?window.devicePixelRatio:1;e=Math.min(e,2.5),(u=h.viewportSize.x*e)>=1200||!h.likelyTouchDevice&&u>800||screen.width>1200?p||(p=!0,d=!0,console.log(screen.width+"use largeImage")):p&&(p=!1,d=!0,console.log(screen.width+"not use largeImage")),d&&!g&&h.invalidateCurrItems(),g&&(g=!1),d=!1}),h.listen("gettingData",function(e,t){p?(t.src=t.o.src,t.alt=t.o.alt,t.w=t.o.w,t.h=t.o.h):(t.src=t.m.src,t.alt=t.o.alt,t.w=t.m.w,t.h=t.m.h)}),h.init()}function Quantity(){this.Extend=function(e,t,a,i){this.DownElement=e,this.UpElement=t,this.TargetElement=a,this.ValueChangeCallBack=i||function(){console.log("ValueChange don't have callback")},this.Process()},this.Process=function(){var e=this;this.UpElement.addEventListener("click",function(t){+e.TargetElement.value<+e.TargetElement.max&&(e.TargetElement.value=++e.TargetElement.value,e.ValueChangeCallBack&&Site.Debounce(e.ValueChangeCallBack(),2e3))}),this.DownElement.addEventListener("click",function(t){+e.TargetElement.value>+e.TargetElement.min&&(e.TargetElement.value=--e.TargetElement.value,e.ValueChangeCallBack&&Site.Debounce(e.ValueChangeCallBack(),2e3))}),this.TargetElement.addEventListener("keyup",function(t){+e.TargetElement.value>+e.TargetElement.max?e.TargetElement.value=+e.TargetElement.max:+e.TargetElement.value<+e.TargetElement.min&&(e.TargetElement.value=+e.TargetElement.min),e.ValueChangeCallBack&&e.ValueChangeCallBack()}),this.TargetElement.addEventListener("change",function(t){e.ValueChangeCallBack&&e.ValueChangeCallBack()})},this.Init=function(e,t){var a=e.querySelector("[data-minus]"),i=e.querySelector("[data-plus]"),n=e.querySelector("input[type='number']");this.Extend(a,i,n,t)}}function processAnonymousUser(e){for(var t=document.querySelectorAll(e+" li canvas"),a=0;a<t.length;a++){var i=t[a],n=i.dataset.userName.split(" "),o=n.length>2?n[0].charAt(0).toUpperCase()+n[1].charAt(0).toUpperCase():n[0].charAt(0).toUpperCase(),s=i.getContext("2d"),r=i.width,l=i.height;window.devicePixelRatio&&(i.setAttribute("width",r*window.devicePixelRatio),i.setAttribute("height",l*window.devicePixelRatio),i.style.width=r+"px",i.style.height=l+"px",s.scale(window.devicePixelRatio,window.devicePixelRatio)),s.fillStyle=Site.StringToHslColor(o,30,80),s.fillRect(0,0,i.width,i.height),s.font=l/2+"px Arial",s.textAlign="center",s.fillStyle="#FFF",s.fillText(o,r/2,l/1.5)}}function loadUserViewedProduct(){var e=LocalStorageHelper.Get(LocalStorageNamesEnum.ViewProductClassificationIds),t=document.querySelector("#productViewedContainer");if(e&&e.length&&t){var a=e.length;t.dataset.itemCount&&(a=Math.min(a,t.dataset.itemCount));for(var i=0;i<a;i++){var n=e[i],o='<a href="[ProductUrl]" title="[ProductName]" class="_image-wrap -tablet-margin-bottom rounded-4 border-1 solid border-silver padding-5"> <img alt="[ProductName]" loading="lazy" class="r-lazy" src="[ProductThumnailUrl]"></a>';o=(o=(o=o.replace(/\[ProductUrl\]/g,n.ProductUrl)).replace(/\[ProductName\]/g,n.ProductName)).replace(/\[ProductThumnailUrl\]/g,n.ProductThumnailUrl),n=Site.HtmlToElement(o),t.appendChild(n[0])}}}function innitFileUploadRatingQuestion(){if(imputDocumentFileQuestion=document.getElementById("inputRatingFormFileQuestion"),inputUserNameQuestion=document.querySelector("#frmProductQuestion [name='UserName']"),inputEmailQuestion=document.querySelector("#frmProductQuestion [name='Email']"),btnRemoveAnwerFor=document.querySelector("#frmProductQuestion [button-awser-for]"),spanUserName=document.querySelector("#frmProductQuestion [button-awser-for] [data-user-name]"),inputParentId=document.querySelector("#frmProductQuestion #ParentId"),textArea=document.querySelector("#frmProductQuestion textarea"),!imputDocumentFileQuestion)return;const e=imputDocumentFileQuestion.dataset.curentPathFiles&&""!==imputDocumentFileQuestion.dataset.curentPathFiles?[imputDocumentFileQuestion.dataset.curentPathFiles]:null,t=imputDocumentFileQuestion.dataset.curentShowingImages&&""!==imputDocumentFileQuestion.dataset.curentShowingImages?[imputDocumentFileQuestion.dataset.curentShowingImages]:null,a=imputDocumentFileQuestion.dataset.maxFile&&""!==imputDocumentFileQuestion.dataset.maxFile?+imputDocumentFileQuestion.dataset.maxFile:3,i=imputDocumentFileQuestion.dataset.maxFile&&""!==imputDocumentFileQuestion.dataset.maxSize?+imputDocumentFileQuestion.dataset.maxSize:5;(fileUploadRatingQuestion=new FileUpload).Init(null,e,t,"#"+imputDocumentFileQuestion.id,"#reviewRatingQuestion","#reviewRatingQuestion","#frmProductQuestion",a,console.log("change"),!0,"RatingFormFile",i)}function processAnwserForInForm(){btnRemoveAnwerFor&&btnRemoveAnwerFor.addEventListener("click",function(e){e.currentTarget.classList.add("hide"),inputParentId.value=""})}function processAnwerClick(){for(var e=document.querySelectorAll("._id-listRatingQuestions [data-awser]"),t=0;t<e.length;t++)e[t].addEventListener("click",function(e){inputParentId.value=e.target.dataset.awser,spanUserName.textContent=e.target.dataset.awserName,btnRemoveAnwerFor.classList.remove("hide"),Site.ScrollToElement("#frmProductQuestion [button-awser-for]"),textArea.focus()})}function processAnonymousAvarta(){for(var e=document.querySelectorAll("._id-listRatingQuestions canvas"),t=0;t<e.length;t++){var a=e[t],i=a.dataset.userName.split(" "),n=i.length>2?i[0].charAt(0).toUpperCase()+i[1].charAt(0).toUpperCase():i[0].charAt(0).toUpperCase(),o=a.getContext("2d"),s=a.width,r=a.height;window.devicePixelRatio&&(a.setAttribute("width",s*window.devicePixelRatio),a.setAttribute("height",r*window.devicePixelRatio),a.style.width=s+"px",a.style.height=r+"px",o.scale(window.devicePixelRatio,window.devicePixelRatio)),o.fillStyle=Site.StringToHslColor(n,30,80),o.fillRect(0,0,a.width,a.height),o.font=r/2+"px Arial",o.textAlign="center",o.fillStyle="#FFF",o.fillText(n,s/2,r/1.5)}}function reloadImageCapcha(){var e=new Date;$("#img-captcha").attr("src","/get-captcha-image?"+e.getTime())}function processUserNameEmail(){inputUserNameQuestion&&!inputUserNameQuestion.value&&(inputUserNameQuestion.value=sessionStorage.getItem("UserName"),inputEmailQuestion.value=sessionStorage.getItem("Email"))}function updateSessionUser(){sessionStorage.setItem("UserName",inputUserNameQuestion.value),sessionStorage.setItem("Email",inputEmailQuestion.value)}function processVote(){for(var e=document.querySelectorAll("[data-vote-up],[data-vote-down]"),t=0;t<e.length;t++)e[t].addEventListener("click",function(e){e.currentTarget.disabled=!0,AjaxRequest.SendRequestGetJson("POST","rating/changeRatingScore",{isUp:e.currentTarget.hasAttribute("data-vote-up"),ratingId:e.currentTarget.dataset.ratingId},function(e,t){for(var a=JSON.parse(e),i=document.querySelector("[data-vote-container='"+a.ratingId+"']"),n=i.querySelectorAll("[data-vote-up],[data-vote-down]"),o=0;o<n.length;o++)n[o].disabled=!1;a.result?(i.querySelector("[data-point]").textContent=a.upvoteCount-a.downVoteCount,Site.NotifyFormSuccess(a.title,a.message)):Site.NotifyFormInfo(a.title,a.message)})})}function clearInput(){Site.ClearInputFile(imputDocumentFileQuestion),Site.ClearInputFile(textArea)}document.addEventListener("DOMContentLoaded",function(e){LoadSwiperDefault(),document.querySelector("._p-show-photowipe").addEventListener("click",function(e){var t=Array.from(galleryTop.slides).findIndex(e=>e.classList.contains("swiper-slide-active"))||galleryTop.activeIndex;_LoadImageSwipe(e.target.dataset.selector,t)})}),document.addEventListener("DOMContentLoaded",function(){}),document.addEventListener("DOMContentLoaded",function(){loadUserViewedProduct()}),document.addEventListener("DOMContentLoaded",function(){(imageCaptchaQuestion=document.querySelector("[data-captcha-container] ._image-wrap"))&&imageCaptchaQuestion.addEventListener("click",function(e){reloadImageCapcha()}),innitFileUploadRatingQuestion(),processUserNameEmail(),processVote(),processAnonymousAvarta(),processAnwserForInForm(),processAnwerClick()});var listSections,dataHead,pagingRating,pagingQuestion,didScroll=!1,isClick=!1;function initPaging(){(pagingRating=new Pagination).Run("#ratingSection"),(pagingQuestion=new Pagination).Run("#sectionQa")}function submitRatingLazy(e){document.querySelector("#frmLazyLoadRatings [name='PageNumber']").value=e,document.querySelector("#frmLazyLoadRatings #btnReloadRatings").click()}function submitQuestionLazy(e){document.querySelector("#frmLazyLoadRatingQuestions [name='PageNumber']").value=e,document.querySelector("#frmLazyLoadRatingQuestions #btnReloadRatings").click()}function listLoadComplete(){processAnonymousUser("#ratingSection ._id-listRatings")}function listQuestionLoadComplete(){processAnonymousUser("#sectionQa ._id-listRatingQuestions")}function innitFileUpload(){var e=document.getElementById("inputRatingFormFile");const t=e.dataset.curentPathFiles&&""!==e.dataset.curentPathFiles?[e.dataset.curentPathFiles]:null,a=e.dataset.curentShowingImages&&""!==e.dataset.curentShowingImages?[e.dataset.curentShowingImages]:null,i=e.dataset.maxFile&&""!==e.dataset.maxFile?+e.dataset.maxFile:3,n=e.dataset.maxFile&&""!==e.dataset.maxSize?+e.dataset.maxSize:5;(new FileUpload).Init(null,t,a,"#inputRatingFormFile","#newReviewContainer","#newReviewContainer","#frmProductRating",i,console.log("change"),!0,"RatingFormFile",n)}function clearform(){$("#frmProductRating")[0].reset();var e=document.getElementById("newReviewContainer");e&&(e.innerHTML="")}function loadScrollNav(){for(var e=document.querySelectorAll("[data-nav-product-detail] button"),t=0;t<e.length;t++)e[t].addEventListener("click",function(e){Site.ScrollToElement("[data-section='"+e.currentTarget.dataset.target+"']")})}function loadIntersectionObserver(){let e={root:null,rootMargin:"0px",threshold:1};for(var t=new IntersectionObserver(function(e){dataHead.dataset.sessionActive=e[0].target.querySelector("[data-section]").dataset.section},e),a=new IntersectionObserver(function(e){dataHead.dataset.sessionActive=e[0].target.querySelector("[data-section]").dataset.section},e),i=document.querySelectorAll("[site-navigation] button"),n=0;n<i.length;n++){var o=document.querySelector(i[n].getAttribute("content"));"section4"===o.id||"section6"===o.id?a.observe(o):t.observe(o)}}document.addEventListener("DOMContentLoaded",function(){var e,t,a,i;for(init(),Site.LockOnsCroll=!1,i=0;i<listQuantities.length;i++){(new Quantity).Init(listQuantities[i],reloadMoneyAndQuantity)}for(i=0;i<attribute1Items.length;i++)attribute1Items[i].addEventListener("change",function(e){reloadMoneyAndQuantity(!1)});for(i=0;i<attribute2Items.length;i++)attribute2Items[i].addEventListener("change",function(e){reloadMoneyAndQuantity(!1)});reloadMoneyAndQuantity(!0),loadJqueryZoom();try{JsBarcode("._barcode").init()}catch(e){console.log(e)}load360Spin(),atiCopyRight(),PushNotifications.initialize(),submitProductWidgetAction("[data-related-products]"),loadScrollNav(),LocalStorageHelper.LogCategory(productCategoryId,!0,!1,!1,!1);const n=document.querySelector("[data-first-thumnail]").dataset.firstThumnail;LocalStorageHelper.LogProductClassIdView(activeProductClass.dataset.activeProductClassification,null!==(e=null===(t=document.querySelector("[name=ProductName]"))||void 0===t?void 0:t.value)&&void 0!==e?e:null===(a=document.querySelector("[data-product-name]"))||void 0===a?void 0:a.innerText,n,document.querySelector("link[rel='canonical']").href),processAnonymousUser("#ratingSection ._id-listRatings"),innitFileUpload(),initPaging(),Site.InitPupup(),facebookAppId&&Site.LoadFacebookApi(facebookAppId)});var zDockInterval=setInterval(function(){for(var e=1,t=0;t<listSections.length;t++)listSections[t]&&listSections[t].getBoundingClientRect().y<5&&(e=listSections[t].dataset.section);dataHead.dataset.sessionActive=e},300);function loadFlashSaleSwiper(){widgetFlashSaleSwiper(2,3,4)}function atiCopyRight(){var e=document.querySelector("[itemprop='itemListElement']:last-child"),t=e.innerText,a=e.querySelector("[content]").attributes.content.value,i=document.createElement("h3");i.classList="d-none";var n=document.createElement("a");n.innerText="Nguồn: "+t+" tại "+window.location.hostname,n.href=a,n.alt="Chi tiết sản phẩm "+t+" tại "+window.location.hostname+". ",n.classList="_atyc",n.setAttribute("style","display:block !important;font-size:0 !important;height:0; color:transparent !important;  "),i.appendChild(n),i.setAttribute("style","display:block !important;font-size:0 !important;height:0; color:transparent !important;  ");var o=document.querySelector("[data-html-content]");o.insertBefore(i,o.querySelector("h3 ~ p"))}function init(){activeProductClass=document.querySelector("[data-active-product-classification]"),listQuantities=document.querySelectorAll("._quantity"),chkOutOfStock=document.querySelector("[data-out-of-stock]"),txtQuantity=document.querySelector("[data-quantity]"),attribute1Items=document.querySelectorAll('input[name="Attribute1Value"]'),attribute2Items=document.querySelectorAll('[data-classification2] [type="radio"]'),productClassificationId=document.querySelector("[name=ProductClassificationId]"),dataPrice=document.querySelector("[data-price]"),dataDelPrice=document.querySelector("[data-del-price]"),idWholesaleInfo=document.getElementById("idWholesaleInfo"),discountPercentEle=document.querySelector("[data-css-discount]"),newestPostsContainer=document.querySelector("[data-selector-newest-post]"),flashSaleContainer=document.querySelector("[data-flash-sale-detail]"),dataCountEle=flashSaleContainer.querySelector("[data-count]"),dataProcessBarEle=flashSaleContainer.querySelector("progress"),listSections=[document.querySelector("[data-section='1']"),document.querySelector("[data-section='2']"),document.querySelector("[data-section='3']"),document.querySelector("[data-section='4']"),document.querySelector("[data-section='5']"),document.querySelector("[data-section='6']"),document.querySelector("[data-section='7']")],dataHead=document.querySelector("main")}function reloadMoneyAndQuantity(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];var t=listPriceInfo[0].productClassificationId,a=document.querySelector("[data-classification-1] input[type=radio]:checked"),i=document.querySelectorAll("[data-classification2]");if(a){t=a.dataset.productClassId;for(var n=0;n<i.length;n++)if(i[n].dataset.classification2===a.value){i[n].removeAttribute("hidden");var o=i[n].querySelector("input[type=radio]:checked");if(o)t=o.dataset.productClassId;else{var s=i[n].querySelector("input[type=radio]");s.checked=!0,t=s.dataset.productClassId}}else i[n].setAttribute("hidden",!0)}var r=listPriceInfo.filter(function(e){return e.productClassificationId===t});if(activeProductClass.dataset.activeProductClassification=r[0].productClassificationId,e||(LoadSwiperDefault(),SlideToProductClass(r[0].productClassificationId)),0!==r.length){history.replaceState(null,null,r[0].url);var l=r[0].quantity;productClassificationId.value=r[0].productClassificationId,chkOutOfStock.checked=l<=0,txtQuantity.max=l,0===+txtQuantity.value&&(txtQuantity.value=Math.min(txtQuantity.max,1)),+txtQuantity.value>+txtQuantity.max&&(txtQuantity.value=+txtQuantity.max);var c=r[0],u=c.quantitiesPrice,d=u[u.length-1].money,m=u[u.length-1].money,h=u[u.length-1].range;for(let e=u.length-1;e>=0&&!(0!==u[e].range&&+txtQuantity.value>=u[e].range);e--)d=u[e].money,e!==u.length-1&&(m=u[e+1].money,h=u[e].range);dataPrice.innerHTML=WNumbHelper.GetFrNumber(d)+"<sup>đ</sup>",dataPrice.dataset.price=d,dataPrice.style.visibility="visible",dataDelPrice.dataset.delPrice=c.price,dataDelPrice.innerHTML=WNumbHelper.GetFrNumber(c.price)+"<sup>đ</sup>",idWholesaleInfo.innerHTML=m!==d?"Số lượng "+h+" để mua với giá "+WNumbHelper.GetFrNumber(m)+"<sup>đ</sup>":"";for(var p=document.querySelectorAll("#_z-barCode li"),g=0;g<p.length;g++)p[g].dataset.productClassId===r[0].productClassificationId?p[g].classList.add("active"):p[g].classList.remove("active");dataDelPrice.classList.add("hide"),d<+dataDelPrice.dataset.delPrice&&dataDelPrice.classList.remove("hide"),discountPercentEle.classList.add("hide");var f=100-100*d/c.price;f>0&&(discountPercentEle.classList.remove("hide"),discountPercentEle.innerText=(c.isFlashSale?"Flash Sale -":"Giảm ")+Number(f).toFixed(2)+"%"),dataCountEle.removeAttribute("data-flash-deal-count-down"),dataProcessBarEle.removeAttribute("data-is-host"),flashSaleContainer.classList.add("hide"),c.isFlashSale&&(flashSaleContainer.classList.remove("hide"),c.valueQuantity<=0?(dataCountEle.dataset.flashDealCountDown=c.countDownTime,checkTimeCountDown("[data-css-simple-detail]")):dataCountEle.innerText="còn "+c.countDownQuantity+" sản phẩm",c.valueQuantity*c.maxHours>c.hours*c.maxValueQuantity?(dataProcessBarEle.setAttribute("data-is-hot","true"),dataProcessBarEle.max=c.maxValueQuantity,dataProcessBarEle.value=c.valueQuantity):(dataProcessBarEle.removeAttribute("data-is-hot"),dataProcessBarEle.max=c.maxHours,dataProcessBarEle.value=c.hours));var v=document.querySelector("#frmAddToCart");v&&window.addEventListener&&window.addEventListener("load",function(){var e,t,a,i=v.querySelectorAll("[name=ProductClassificationId]")[1].value||v.querySelectorAll("[name=ProductClassificationId]")[0].value,n=document.querySelector("[data-css-simple-detail] [type=radio]:checked"),o=null!=n?n.value:"",s=null!==(e=null===(t=document.querySelector("[name=ProductName]"))||void 0===t?void 0:t.value)&&void 0!==e?e:null===(a=document.querySelector("[data-product-name]"))||void 0===a?void 0:a.innerText;"undefined"!=typeof EnhancedEcommerce&&EnhancedEcommerce&&EnhancedEcommerce.AddImpression(i,s,o)})}else chkOutOfStock.checked=!0}function updateAnalytic(){var e=document.querySelector("#frmAddToCart");if(e){var t,a,i,n=e.querySelectorAll("[name=ProductClassificationId]")[1].value||e.querySelectorAll("[name=ProductClassificationId]")[0].value,o=document.querySelector("[data-css-simple-detail] [type=radio]:checked"),s=null!=o?o.value:"",r=null!==(t=null===(a=document.querySelector("[name=ProductName]"))||void 0===a?void 0:a.value)&&void 0!==t?t:null===(i=document.querySelector("[data-product-name]"))||void 0===i?void 0:i.innerText,l=document.querySelector("[data-css-simple-detail] [data-price]").dataset.price;"undefined"!=typeof EnhancedEcommerce&&EnhancedEcommerce&&EnhancedEcommerce.AddProduct(n,r,s,"","",l)}}function btnByNowClick(e){window.location=e.target.dataset.href}function load360Spin(){var e=document.querySelector(".spritespin");e&&(e.dataset.width?$(".spritespin").spritespin({source:image360Sources,width:Math.min(document.querySelector("#spin360").getBoundingClientRect().width,500),height:Math.min(document.querySelector("#spin360").getBoundingClientRect().width,500),sense:-1,frameTime:100,responsive:!1}):$(".spritespin").spritespin({source:image360Sources,width:500,height:500,sense:-1,frameTime:100,responsive:!0}))}function ratingCompleteCallBack(){console.log("Reload ratings"),document.querySelector("#ratingSection details").removeAttribute("open")}function loadJqueryZoom(){if(document.querySelector("[data-device=Desktop]"))for(var e=document.querySelectorAll("[data-zoom]"),t=0;t<e.length;t++)new Drift(e[t],{paneContainer:document.querySelector("[data-css-simple-detail]")})}