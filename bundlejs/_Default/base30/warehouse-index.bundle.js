"use strict";var map,sPlaceLevel1,sPlaceLevel2,sPlaceLevel3,txtVnLocationId,btnReloadListWarehouse,btnGetCurentPlace,txtLatitude,txtLongitude,infoWindow,markers=[];function initWarehouseList(){txtVnLocationId=document.querySelector("#frmLazyLoadWareHouse [name='VnLocationId']"),btnReloadListWarehouse=document.getElementById("btnReloadListWarehouse"),btnGetCurentPlace=document.getElementById("btnGetCurentPlace"),txtLatitude=document.getElementById("txtLatitude"),txtLongitude=document.getElementById("txtLongitude"),btnGetCurentPlace.addEventListener("click",function(e){navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(e){var t={lat:e.coords.latitude,lng:e.coords.longitude};(infoWindow=new google.maps.InfoWindow).setPosition(t),infoWindow.setContent("Vị trí của bạn"),infoWindow.open(map),map.setCenter(t),txtLatitude.value=e.coords.latitude,txtLongitude.value=e.coords.longitude,btnReloadListWarehouse.click()})}),sPlaceLevel1=document.getElementById("sPlaceLevel1"),sPlaceLevel2=document.getElementById("sPlaceLevel2"),sPlaceLevel3=document.getElementById("sPlaceLevel3"),sPlaceLevel1.addEventListener("change",function(e){var t=e.currentTarget.value,a=sPlaceLevel2.querySelectorAll("option");a[0].selected=!0;for(var n=1;n<a.length;n++)a[n].setAttribute("disabled","disabled");if(t){for(n=1;n<a.length;n++)a[n].dataset.parentId===t&&a[n].removeAttribute("disabled");console.log("sPlaceLevel1:"+t),lazyLoadWarehouse(t)}else lazyLoadWarehouse()}),sPlaceLevel2.addEventListener("change",function(e){var t=e.currentTarget.value,a=sPlaceLevel3.querySelectorAll("option");a[0].selected=!0;for(var n=1;n<a.length;n++)a[n].setAttribute("disabled","disabled");if(t){for(n=1;n<a.length;n++)a[n].dataset.parentId===t&&a[n].removeAttribute("disabled");console.log("sPlaceLevel2:"+t),lazyLoadWarehouse(t)}else lazyLoadWarehouse()}),sPlaceLevel3.addEventListener("change",function(e){var t=e.currentTarget.value;t?(console.log("sPlaceLevel3:"+t),lazyLoadWarehouse(t)):lazyLoadWarehouse()})}function lazyLoadWarehouse(e){txtVnLocationId.value=e||(sPlaceLevel3.value?sPlaceLevel3.value:sPlaceLevel2.value?sPlaceLevel2.value:sPlaceLevel1.value?sPlaceLevel1.value:""),btnReloadListWarehouse.click()}function initMap(){var e=document.getElementById("mapContainer"),t={lat:+e.dataset.lat,lng:+e.dataset.lng};map=new google.maps.Map(document.getElementById("mapContainer"),{center:t,zoom:5,disableDefaultUI:!0,options:{gestureHandling:"greedy"}}),loadMarker()}function lazyloadComplete(){loadMarker()}function loadMarker(){clearMarkers();var e=document.querySelectorAll("[name='SelectedWarehouseId']");e=Array.from(e).filter(function(e){return 0!=e.dataset.lat});for(var t=0;t<e.length;t++)e[t].addEventListener("change",function(e){var t={lat:+e.target.dataset.lat,lng:+e.target.dataset.lng};map.setCenter(t),map.setZoom(18)});for(var a=new google.maps.LatLngBounds,n=0;n<e.length;n++){var o={lat:+e[n].dataset.lat,lng:+e[n].dataset.lng},l=new google.maps.Marker({map:map,icon:window.location.origin+"/favicon-32x32.png",position:o,title:e[n].dataset.title});a.extend(o),markers.push(l)}map.fitBounds(a),map.zoom>18&&map.setZoom(18)}function clearMarkers(){for(var e=0;e<markers.length;e++)markers[e].setMap(null)}document.addEventListener("DOMContentLoaded",function(){initWarehouseList()});