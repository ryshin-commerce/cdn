"use strict";function TabPages(){this.Extend=function(e,t,i){var n=e.dataset.activeTabNumber;this.SelectedTabNumber=+n||-1,this.NavElement=e,this.Tabs=t,this.TabContains=i,this.Process()},this.SetActive=function(e){this.SelectedTabNumber=+e||-1,this.NavElement.dataset.activeTabNumber=+e||-1,this.Tabs[--e].dataset.enable="True"},this.SetDeActive=function(e){e=--e;null!=this.Tabs[e]&&(this.Tabs[e].dataset.enable="False")},this.Process=function(){for(var n=this,e=0;e<this.Tabs.length;e++)this.Tabs[e].addEventListener("click",function(e){if("False"!=e.currentTarget.dataset.enable&&"False"!=e.target.dataset.enable&&(e.currentTarget.dataset.tabUrl&&history.replaceState(null,null,e.currentTarget.dataset.tabUrl),n.SelectedTabNumber=+e.currentTarget.dataset.tab||-1,n.NavElement.dataset.activeTabNumber=n.SelectedTabNumber,e.currentTarget.dataset.callback)){for(var t=null,i=0;i<n.TabContains.length;i++)if(n.TabContains[i].dataset.tabContent===e.currentTarget.dataset.tab){t=n.TabContains[i];break}Site.GetFunction(e.currentTarget.dataset.callback,["tabNumber","tabContainerElement"]).apply(e.currentTarget,[n.SelectedTabNumber,t])}})},this.Init=function(e){var t,i=document.querySelector(e);i&&(t=i.parentNode.querySelectorAll("[data-tab]"),e=i.parentNode.querySelectorAll("[data-tab-content]"),this.Extend(i,t,e))}}function FileUpload(){this.InputElement=null,this.PreviewBoxElement=null,this.CurentImageBox=null,this.Form=null,this.MaxFile=null,this.StoredFiles=[],this.CurentFiles=[],this.CurentPreviewImages=[],this.Extend=function(e,t,i,n,a,s,r,o,l,u,c,d){this.InputElement=n,this.AcceptExtention=n.accept.split(","),this.PreviewBoxElement=s,this.CurentImageBox=a,this.Form=r,this.UniqueControlName=c?"CurentFilePaths":"NewFiles"+c,this.MaxFile=o||2,this.MaxFileSize=d||5242880,this.InputChangeCallBack=void 0!==l?l:null,this.InputElement.addEventListener("change",this.InputChange),(this.InputElement.fileUpload=this).FileReader=new FileReader,this.IsCreateInputName=u||!1,this.HostCdn=e||"",this.CurentFiles=t||[],this.CurentPreviewImages=i||[],this.Process()},this.Process=function(){if(this.CurentImageBox)for(var t=this,e=0;e<this.CurentFiles.length;e++){var i=this.CurentFiles[e],n=this.CurentPreviewImages[e],a=document.createElement("div");a.className="col-3 gutter-10 _p-item text-center";var s=document.createElement("figure");s.className="_max-height-200 relative hover-children-show";var r=document.createElement("button");r.className="absolute hide tablet-show -border width-100 height-100 _fill-silver-opacity text-strong",r.innerText="CLICK ĐỂ XÓA",r.type="button",r.dataset.file=i,r.dataset.notClose="I",r.addEventListener("click",function(e){t.RemoveCurentFile(e,t.InputElement)});var o,l,u=i.substring(i.lastIndexOf("/")+1),c=u.substring(u.indexOf(".")+1);("."+c).match(".jpg,.png,.svg,.gif,.jfif,.webp,.csv".replace(new RegExp(",","g"),"|"))?o="<img class='_max-width-100-percent'   onerror='this.src=\"/images/shared/no-image.svg\"'   src='"+t.HostCdn+"/"+n+"' alt='"+u+"' data-file='"+u+"' /><figcaption class='padding-5 text-center _text-ellipsis'>"+u+"</figcaption>":(o="<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 512 512' version='1'><path d='M128 0c-18 0-32 14-32 32v448c0 18 14 32 32 32h320c18 0 32-14 32-32V128L352 0H128z' fill='#e2e5e7'/><path d='M384 128h96L352 0v96c0 18 14 32 32 32z' fill='#b0b7bd'/><path fill='#cad1d8' d='M480 224l-96-96h96z'/><path d='M416 416c0 9-7 16-16 16H48c-9 0-16-7-16-16V256c0-9 7-16 16-16h352c9 0 16 7 16 16v160z' fill='#f15642'/><path d='M400 432H96v16h304c9 0 16-7 16-16v-16c0 9-7 16-16 16z' fill='#cad1d8'/><text y='375' x='212' style='line-height:1.25;text-align:center' font-weight='400' font-size='147' font-family='sans-serif' letter-spacing='0' word-spacing='0' text-anchor='middle' stroke-width='3'><tspan style='line-height:1.25;-inkscape-font-specification:'monospace Bold';text-align:center' y='375' x='212' font-weight='700' font-family='monospace' fill='#fff'>"+c+"</tspan></text></svg>",(l=document.createElement("div")).innerHTML="<div class='row text-center _text-ellipsis'><a target='_blank' href='"+t.HostCdn+"/"+n+"'>"+u+"</a></div>"),t.IsCreateInputName&&(o+="<input type='text' class='_hidden'    name='"+t.UniqueControlName+"' value="+i+(t.Form?" form='"+t.Form.id+"'":"")+"></input>"),s.innerHTML=o,s.insertBefore(r,s.childNodes[0]),a.appendChild(s),l&&a.appendChild(l),t.CurentImageBox.appendChild(a)}},this.InputChange=function(e){var s=e.target.fileUpload,e=e.target.files,t=Array.prototype.slice.call(e);s.PreviewBoxElement.innerHTML="",s.StoredFiles=[];for(var i=0;i<t.length;i++){var n,a=t[i];a.size>s.MaxFileSize?Site.NotifyFormFailed("Lỗi","File không được lớn hơn "+s.MaxFileSize/1048576+" mb"):(s.StoredFiles.push(a),s.PreviewBoxElement===s.CurentImageBox&&(s.CurentFiles=[],s.CurentImageBox.innerHTML=""),s.StoredFiles.length+s.CurentFiles.length<=s.MaxFile&&((n=new FileReader).onload=function(e){var t=event.target,i=document.createElement("div");i.className="gutter-10 _p-item";var n=document.createElement("figure");n.className="_max-height-200 relative hover-children-show";var a=document.createElement("button");a.className="absolute hide -border width-100 height-100 _fill-silver-opacity text-strong",a.type="button",a.innerText="CLICK ĐỂ XÓA",a.dataset.file=t.name,a.dataset.notClose="I",a.addEventListener("click",function(e){s.RemoveFile(e,s.InputElement)}),e=t.fileType.match("image.*")?"<img class='width-100 _max-width-100-percent' src='"+e.target.result+"' alt='"+t.name+"' data-file='"+t.name+"' /><figcaption class='padding-5 text-center _text-ellipsis'>("+t.size%1e3+" kb) "+t.name+"</figcaption>":"<svg xmlns='http://www.w3.org/2000/svg' width='100' height='100' viewBox='0 0 512 512' version='1'><path d='M128 0c-18 0-32 14-32 32v448c0 18 14 32 32 32h320c18 0 32-14 32-32V128L352 0H128z' fill='#e2e5e7'/><path d='M384 128h96L352 0v96c0 18 14 32 32 32z' fill='#b0b7bd'/><path fill='#cad1d8' d='M480 224l-96-96h96z'/><path d='M416 416c0 9-7 16-16 16H48c-9 0-16-7-16-16V256c0-9 7-16 16-16h352c9 0 16 7 16 16v160z' fill='#f15642'/><path d='M400 432H96v16h304c9 0 16-7 16-16v-16c0 9-7 16-16 16z' fill='#cad1d8'/><text y='375' x='212' style='line-height:1.25;text-align:center' font-weight='400' font-size='147' font-family='sans-serif' letter-spacing='0' word-spacing='0' text-anchor='middle' stroke-width='3'><tspan style='line-height:1.25;-inkscape-font-specification:'monospace Bold';text-align:center' y='375' x='212' font-weight='700' font-family='monospace' fill='#fff'>"+t.name.substring(t.name.indexOf(".")+1)+"</tspan></text></svg><figcaption class='padding-5 text-center _text-ellipsis'>("+t.size%1e3+" kb) "+t.name+"</figcaption>",s.IsCreateInputName&&(e+="<input type='text' class='_hidden' name='"+s.UniqueControlName+"[]' value="+t.name+(s.Form?" form='"+s.Form.id+"'":"")+"></input>"),n.innerHTML=e,n.insertBefore(a,n.childNodes[0]),i.appendChild(n),s.PreviewBoxElement.appendChild(i)},n.size=a.size,n.fileType=a.type,n.name=a.name,n.readAsDataURL(a)))}s.InputChangeCallBack&&s.InputChangeCallBack(s.StoredFiles)},this.RemoveCurentFile=function(e){for(var t=e.target.dataset.file,i=0;i<this.CurentFiles.length;i++)if(this.CurentFiles[i]===t){this.CurentFiles.splice(i,1);break}Site.FindParent(e.target,"_p-item").remove()},this.RemoveFile=function(e,t){for(var i=e.target.dataset.file,n=0;n<this.StoredFiles.length;n++)if(this.StoredFiles[n].name===i){this.StoredFiles.splice(n,1);break}Site.FindParent(e.target,"_p-item").remove(),Site.ClearInputFile(t)},this.Init=function(e,t,i,n,a,s,r,o,l,u,c,d){var m=document.querySelector(n),s=document.querySelector(s),a=document.querySelector(a),r=document.querySelector(r);null!=m&&null!=s||console.warn(n+" or "+s+": NULL"),this.Extend(e,t,i,m,a,s,r,o,l,u,c,d)}}var imageCaptchaQuestion,fileUploadRatingQuestion,imputDocumentFileQuestion,inputUserNameQuestion,inputEmailQuestion,btnRemoveAnwerFor,spanUserName,inputParentId,textArea;function innitFileUploadRatingQuestion(){var e,t,i,n;imputDocumentFileQuestion=document.getElementById("inputRatingFormFileQuestion"),inputUserNameQuestion=document.querySelector("#frmProductQuestion [name='UserName']"),inputEmailQuestion=document.querySelector("#frmProductQuestion [name='Email']"),btnRemoveAnwerFor=document.querySelector("#frmProductQuestion [button-awser-for]"),spanUserName=document.querySelector("#frmProductQuestion [button-awser-for] [data-user-name]"),inputParentId=document.querySelector("#frmProductQuestion #ParentId"),textArea=document.querySelector("#frmProductQuestion textarea"),imputDocumentFileQuestion&&(e=imputDocumentFileQuestion.dataset.curentPathFiles&&""!==imputDocumentFileQuestion.dataset.curentPathFiles?[imputDocumentFileQuestion.dataset.curentPathFiles]:null,t=imputDocumentFileQuestion.dataset.curentShowingImages&&""!==imputDocumentFileQuestion.dataset.curentShowingImages?[imputDocumentFileQuestion.dataset.curentShowingImages]:null,i=imputDocumentFileQuestion.dataset.maxFile&&""!==imputDocumentFileQuestion.dataset.maxFile?+imputDocumentFileQuestion.dataset.maxFile:3,n=imputDocumentFileQuestion.dataset.maxFile&&""!==imputDocumentFileQuestion.dataset.maxSize?+imputDocumentFileQuestion.dataset.maxSize:5,(fileUploadRatingQuestion=new FileUpload).Init(null,e,t,"#"+imputDocumentFileQuestion.id,"#reviewRatingQuestion","#reviewRatingQuestion","#frmProductQuestion",i,console.log("change"),!0,"RatingFormFile",n))}function processAnwserForInForm(){btnRemoveAnwerFor&&btnRemoveAnwerFor.addEventListener("click",function(e){e.currentTarget.classList.add("hide"),inputParentId.value=""})}function processAnwerClick(){for(var e=document.querySelectorAll("._id-listRatingQuestions [data-awser]"),t=0;t<e.length;t++)e[t].addEventListener("click",function(e){inputParentId.value=e.target.dataset.awser,spanUserName.textContent=e.target.dataset.awserName,btnRemoveAnwerFor.classList.remove("hide"),Site.ScrollToElement("#frmProductQuestion [button-awser-for]"),textArea.focus()})}function processAnonymousAvarta(){for(var e=document.querySelectorAll("._id-listRatingQuestions canvas"),t=0;t<e.length;t++){var i=e[t],n=i.dataset.userName.split(" "),a=2<n.length?n[0].charAt(0).toUpperCase()+n[1].charAt(0).toUpperCase():n[0].charAt(0).toUpperCase(),s=i.getContext("2d"),r=i.width,n=i.height;window.devicePixelRatio&&(i.setAttribute("width",r*window.devicePixelRatio),i.setAttribute("height",n*window.devicePixelRatio),i.style.width=r+"px",i.style.height=n+"px",s.scale(window.devicePixelRatio,window.devicePixelRatio)),s.fillStyle=Site.StringToHslColor(a,30,80),s.fillRect(0,0,i.width,i.height),s.font=n/2+"px Arial",s.textAlign="center",s.fillStyle="#FFF",s.fillText(a,r/2,n/1.5)}}function reloadImageCapcha(){var e=new Date;$("#img-captcha").attr("src","/get-captcha-image?"+e.getTime())}function processUserNameEmail(){inputUserNameQuestion&&!inputUserNameQuestion.value&&(inputUserNameQuestion.value=sessionStorage.getItem("UserName"),inputEmailQuestion.value=sessionStorage.getItem("Email"))}function updateSessionUser(){sessionStorage.setItem("UserName",inputUserNameQuestion.value),sessionStorage.setItem("Email",inputEmailQuestion.value)}function processVote(){for(var e=document.querySelectorAll("[data-vote-up],[data-vote-down]"),t=0;t<e.length;t++)e[t].addEventListener("click",function(e){e.currentTarget.disabled=!0,AjaxRequest.SendRequestGetJson("POST","rating/changeRatingScore",{isUp:e.currentTarget.hasAttribute("data-vote-up"),ratingId:e.currentTarget.dataset.ratingId},function(e,t){for(var i=JSON.parse(e),e=document.querySelector("[data-vote-container='"+i.ratingId+"']"),n=e.querySelectorAll("[data-vote-up],[data-vote-down]"),a=0;a<n.length;a++)n[a].disabled=!1;i.result?(e.querySelector("[data-point]").textContent=i.upvoteCount-i.downVoteCount,Site.NotifyFormSuccess(i.title,i.message)):Site.NotifyFormInfo(i.title,i.message)})})}function clearInput(){Site.ClearInputFile(imputDocumentFileQuestion),Site.ClearInputFile(textArea)}function loadSuggestProductSwipper(e){var t=null==e?null:document.querySelector(e);null!==(e=null==t?void 0:t.querySelector("[data-product-id]"))&&void 0!==e&&e||null!=t&&t.remove();e=t.querySelector(".swiper-container"),t=t.querySelector("._idSuggestProductList-swiper-pagination"),new Swiper(e,{slidesPerView:4,spaceBetween:30,freeMode:!0,pagination:{el:t,clickable:!0},autoplay:{delay:3e3,disableOnInteraction:!0}})}function processListNewsCategories(e){var t=null==e?null:document.querySelector(e);null!==(e=null==t?void 0:t.querySelector("[data-post-id]"))&&void 0!==e&&e||null!=t&&t.remove();new Swiper("._id-listPost",{slidesPerView:3,effect:"slide",spaceBetween:50,pagination:{el:"._idPostList-swiper-pagination ",clickable:!0},autoplay:{delay:2e3,disableOnInteraction:!0}})}function initMap(){var e,t,i=document.getElementById("mapContainer");i&&(e={lat:+i.dataset.lat,lng:+i.dataset.lng},t=new google.maps.Map(document.getElementById("mapContainer"),{center:e,zoom:15,disableDefaultUI:!0}),new google.maps.Marker({map:t,position:e,title:i.dataset.title}))}document.addEventListener("DOMContentLoaded",function(){(imageCaptchaQuestion=document.querySelector("[data-captcha-container] ._image-wrap"))&&imageCaptchaQuestion.addEventListener("click",function(e){reloadImageCapcha()}),innitFileUploadRatingQuestion(),processUserNameEmail(),processVote(),processAnonymousAvarta(),processAnwserForInForm(),processAnwerClick()}),document.addEventListener("DOMContentLoaded",function(){init(),(new TabPages).Init("[data-main-section] [data-active-tab-number]")});