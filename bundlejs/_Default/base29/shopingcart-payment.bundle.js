"use strict";function TabPages(){this.Extend=function(e,t,a){var o=e.dataset.activeTabNumber;this.SelectedTabNumber=+o||-1,this.NavElement=e,this.Tabs=t,this.TabContains=a,this.Process()},this.SetActive=function(e){this.SelectedTabNumber=+e||-1,this.NavElement.dataset.activeTabNumber=+e||-1,this.Tabs[--e].dataset.enable="True"},this.SetDeActive=function(e){e=--e;null!=this.Tabs[e]&&(this.Tabs[e].dataset.enable="False")},this.Process=function(){for(var o=this,e=0;e<this.Tabs.length;e++)this.Tabs[e].addEventListener("click",function(e){if("False"!=e.currentTarget.dataset.enable&&"False"!=e.target.dataset.enable&&(e.currentTarget.dataset.tabUrl&&history.replaceState(null,null,e.currentTarget.dataset.tabUrl),o.SelectedTabNumber=+e.currentTarget.dataset.tab||-1,o.NavElement.dataset.activeTabNumber=o.SelectedTabNumber,e.currentTarget.dataset.callback)){for(var t=null,a=0;a<o.TabContains.length;a++)if(o.TabContains[a].dataset.tabContent===e.currentTarget.dataset.tab){t=o.TabContains[a];break}Site.GetFunction(e.currentTarget.dataset.callback,["tabNumber","tabContainerElement"]).apply(e.currentTarget,[o.SelectedTabNumber,t])}})},this.Init=function(e){var t,a=document.querySelector(e);a&&(t=a.parentNode.querySelectorAll("[data-tab]"),e=a.parentNode.querySelectorAll("[data-tab-content]"),this.Extend(a,t,e))}}var tabs,selectCallbackFunction,imageCaptcha,fileUploadNewReview,imputDocumentFile,listCheckWarehouses,btnLazyloadWarehouse;function initTabView(e){for(var t=document.querySelectorAll("[data-tab-content='"+e+"'] [data-vn-location-id]"),a=0;a<t.length;a++)t[a].addEventListener("click",function(e){for(var t,a=Site.FindParentByAttribute(null!==(t=e.currentTarget)&&void 0!==t?t:e.target,"data-tab-content").querySelectorAll("[data-vn-location-id]"),o=0;o<a.length;o++)a[o].classList.remove("_text-primary");selectCallbackFunction.apply(this,[(null!==(t=e.currentTarget)&&void 0!==t?t:e.target).dataset.level,(null!==(t=e.currentTarget)&&void 0!==t?t:e.target).dataset.vnLocationId,(null!==(t=e.currentTarget)&&void 0!==t?t:e.target).dataset.fullName]),(null!==(t=e.currentTarget)&&void 0!==t?t:e.target).classList.add("_text-primary"),AjaxRequest.SendRequestGetJson("POST","/ShopingCart/GetChildVnLocations",{parentId:(null!==(t=e.currentTarget)&&void 0!==t?t:e.target).dataset.vnLocationId},function(e,t){if(200==+t){var t=1,a=JSON.parse(e);if(0<a.length){var t=+a[0].level,o=document.querySelector("[data-list-"+t+"]");o.innerHTML="";for(var n=0;n<a.length;n++){var r=document.createElement("li"),i="<li class='padding-10 _cursor-poiter animate-all ease' data-level='"+a[n].level+"' data-full-name='"+a[n].fullAddress+"' data-vn-location-id='"+a[n].id+"'>"+a[n].name+"</li>";r.innerHTML=i,o.appendChild(r)}initTabView(t),tabs.SetActive(t),tabs.SetDeActive(1+t)}}else Site.NotifyFormFailed("THÔNG BÁO","Thay đổi trạng thái thất bại")})})}function initVnLocationViewComponent(e,t){(tabs=new TabPages).Init("[data-active-tab-number]"),initTabView(1),initTabView(2),initTabView(3),selectCallbackFunction=t}function vnLocationSelectFormLazyLoadData(e){var t=document.getElementById("frmLazyLoadPlaceSelection");t&&(t.querySelector("[name='SelectedLocationId']").value=e,t.querySelector("#btnLoadPlaceSelectForm").click())}function loadDiscountCodeSliderForMobile(){Site.IsMobileBackend()&&new Swiper("._idDiscountCodeListContainer.swiper-container",{centeredSlides:!0,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}})}function initListVoucher(){for(var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:64,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:64,a=document.querySelectorAll("._idDiscountCodeListContainer [data-generate-barcode]"),o=0;o<a.length;o++)new QRCode(a[o],{text:a[o].dataset.generateBarcode,width:e,height:t,colorDark:"#000000",colorLight:"#ffffff",correctLevel:QRCode.CorrectLevel.L});loadDiscountCodeSliderForMobile(),loadCountDown()}function loadCountDown(){var i=0;setInterval(function(){i-=1;for(var e=document.querySelectorAll("._idDiscountCodeListContainer [data-count-down]"),t=0;t<e.length;t++){if(!e)return;var a=e[t].dataset.countDown,o=Math.floor(a/86400),n=a%86400+i;if(-1==(n-=1))return void clearInterval(counter);var r=n%60,a=Math.floor(n/60),n=Math.floor(a/60);(a%=60)<10&&(a="0"+a),(n%=60)<10&&(n="0"+n),r<10&&(r="0"+r),e[t].innerHTML=(0<o?o+" ngày<br> ":"")+"<span count-down>"+n+":"+a+":"+r+"</span>"}},1e3)}function lazyloadComplete(){listCheckWarehouses=document.querySelectorAll("._id-clistWareHouses [name='SelectedWarehouseId']");for(var e=0;e<listCheckWarehouses.length;e++)listCheckWarehouses[e].addEventListener("change",function(e){warehouseSelected(e.target.value)})}function selectWarehouse(e,t){for(var a=null,o=1e20,n=0;n<listCheckWarehouses.length;n++){var r=WNumbHelper.GetDistance(e,t,listCheckWarehouses[n].dataset.lat,listCheckWarehouses[n].dataset.lng);r<o&&(a=listCheckWarehouses[n],o=r)}a.checked=!0,a.dispatchEvent(new Site.CreateEvent("change"))}function ownKeys(t,e){var a,o=Object.keys(t);return Object.getOwnPropertySymbols&&(a=Object.getOwnPropertySymbols(t),e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),o.push.apply(o,a)),o}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(Object(a),!0).forEach(function(e){_defineProperty(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):ownKeys(Object(a)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}function _defineProperty(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function asyncGeneratorStep(e,t,a,o,n,r,i){try{var l=e[r](i),c=l.value}catch(e){return void a(e)}l.done?t(c):Promise.resolve(c).then(o,n)}function _asyncToGenerator(l){return function(){var e=this,i=arguments;return new Promise(function(t,a){var o=l.apply(e,i);function n(e){asyncGeneratorStep(o,t,a,n,r,"next",e)}function r(e){asyncGeneratorStep(o,t,a,n,r,"throw",e)}n(void 0)})}}document.addEventListener("DOMContentLoaded",function(){}),document.addEventListener("DOMContentLoaded",function(){(btnLazyloadWarehouse=document.getElementById("btnReloadListWarehouse")).click()});var myList,txtPhone,txtLatitude,txtLongitude,txtAddress,txtId,txtFullName,txtShipmentTypeEnum,txtServiceId,txtShowingUiShipPrice,phoneNumberCleave,btnReloadShopingCartcartDetail,txtCode,txtDiscountcartDetail,txtDiscountCode,btnSubmitLoadDiscountCode,btnSearchWard,txtVnLocationName,txtVnLocationId,spanDataShipAddress,listLabelNeedPlaceId,btnComplete,btnShowSugestModel,btnLatLng,btnLoadLazyListVoucher,suggestLocationModel,vnLocationSuggestContainer,showListVoucherModel,userLocalStorage,isAuthenticated,vnLocatonNameContainer,storeLastVnLocationId,privateNoVnLocationMessage="",forceComplete=!0;function loadListVoucher(){var e;btnLoadLazyListVoucher.click(),showListVoucherModel.removeAttribute("hidden"),showListVoucherModel.classList.add("visible"),document.querySelector("#frmLazyLoadDiscountCodeList [name='payTypeEnum']").value=document.querySelector("[name='OrderViewModel.PayTypeEnum']:checked").value,null!==(e=document.getElementById("btnSubmitLoadDiscountCodeList"))&&void 0!==e&&e.click()}function loadVnLocationSuccess(){initVnLocationViewComponent("",function(e,t,a){txtVnLocationId.value=t,txtVnLocationName.value=a,updateRealAddress(),3==e&&updateVnLocation(!1)})}function initVoucher(e){e=document.querySelector(e).querySelector("[data-generate-barcode]");e&&new QRCode(e,{text:e.dataset.generateBarcode,width:64,height:64,colorDark:"#000000",colorLight:"#ffffff",correctLevel:QRCode.CorrectLevel.L})}function selecVoucher(e){txtDiscountCode.value=e,Site.RefreshUnobtrusiveValidate("#frmShipInfo"),uploadCart(e),loadVoucher(e),Site.ClosePopup()}function processGetLatlongBtn(){return _processGetLatlongBtn.apply(this,arguments)}function _processGetLatlongBtn(){return(_processGetLatlongBtn=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t,a,o,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(btnLatLng&&navigator.geolocation){e.next=3;break}return null!==(t=btnLatLng)&&void 0!==t&&t.classList.add("hide"),e.abrupt("return");case 3:return e.prev=3,e.next=6,getCurrentPositionAsync();case 6:if(a=e.sent,o=a.coords,a=o.latitude,o=o.longitude,txtLatitude.value=a,txtLongitude.value=o,.5<WNumbHelper.GetDistance(userLocalStorage.Latitude,userLocalStorage.Longitude,a,o)&&(userLocalStorage.VnLocationId="",userLocalStorage.VnLocationName=""),userLocalStorage.Latitude=a,userLocalStorage.Longitude=o,LocalStorageHelper.Set(LocalStorageNamesEnum.UserConfigs,userLocalStorage),btnLatLng.classList.add("hide"),txtVnLocationId.value)return e.abrupt("return");e.next=18;break;case 18:return e.next=20,getVnLocationByLatLngAsync(a,o);case 20:if(n=e.sent,userLocalStorage.VnLocationId)return selectedSuggestGeoLocation(),e.abrupt("return");e.next=24;break;case 24:renderSuggestLocationUI(n),e.next=30;break;case 27:e.prev=27,e.t0=e.catch(3),1===e.t0.code?alert("Bạn đã từ chối chia sẻ vị trí."):2===e.t0.code&&btnLatLng.classList.add("hide");case 30:case"end":return e.stop()}},e,null,[[3,27]])}))).apply(this,arguments)}function getCurrentPositionAsync(){return new Promise(function(e,t){navigator.geolocation.getCurrentPosition(e,t)})}function getVnLocationByLatLngAsync(e,o){return new Promise(function(t,a){AjaxRequest.SendRequestGetJson("POST","shopingcart/getvnlocationbyLatLng",{latitude:e,longitude:o},function(e){try{t(JSON.parse(e))}catch(e){a(e)}})})}function renderSuggestLocationUI(e){var t=Site.HtmlToElement("<li class='row padding-h padding-v-5 border-solid border-1 border-bottom'><label class='radio _cursor-pointer _vertical-align-middle'><input name='SuggestLocation' type='radio'/><i><span class='padding-left-5'>Tôi sẽ tự chọn phường xã</span></i></label></li>")[0];t.querySelector("input").addEventListener("change",function(){resetUserLocation(),Site.ClosePopup()}),vnLocationSuggestContainer.appendChild(t),null!=e&&e.forEach(function(e){e=Site.HtmlToElement("<li class='row padding-h padding-v-5 border-solid border-1 border-bottom'> <label class='radio _cursor-pointer _vertical-align-middle'> <input name='SuggestLocation' type='radio' data-lat='".concat(e.geoLocation.coordinates.latitude,"' data-lng='").concat(e.geoLocation.coordinates.longitude,"' data-full-address='").concat(e.fullAddress,"' data-level='").concat(e.geoLocation.level,"' data-vnlocation-id='").concat(e.id,"' /> <i><span class='padding-left-5'>").concat(e.fullAddress,"</span></i> </label> </li>"))[0];e.querySelector("input").addEventListener("change",function(e){userLocalStorage.VnLocationId=e.target.dataset.vnlocationId,userLocalStorage.VnLocationName=e.target.dataset.fullAddress,LocalStorageHelper.Set(LocalStorageNamesEnum.UserConfigs,userLocalStorage),Site.ClosePopup(),selectedSuggestGeoLocation()}),vnLocationSuggestContainer.appendChild(e)}),suggestLocationModel.removeAttribute("hidden"),suggestLocationModel.classList.add("visible")}function resetUserLocation(){txtLatitude.value="",txtLongitude.value="",userLocalStorage.VnLocationId="",userLocalStorage.VnLocationName="",userLocalStorage.Latitude=0,userLocalStorage.Longitude=0,LocalStorageHelper.Set(LocalStorageNamesEnum.UserConfigs,userLocalStorage)}function selectedSuggestGeoLocation(){var e=null!==(e=LocalStorageHelper.Get(LocalStorageNamesEnum.UserConfigs))&&void 0!==e?e:LocalStorageHelper.InitUserConfigs();txtVnLocationId.value=e.VnLocationId,txtVnLocationName.value=e.VnLocationName,document.querySelector("[data-warehouse-list-container] [name='SelectedWarehouseId']:checked")?selectWarehouse(e.Latitude,e.Longitude):updateVnLocation(),vnLocationSelectFormLazyLoadData(txtVnLocationId.value)}function showAnimation(){}function initPayment(){vnLocationSuggestContainer=document.querySelector("[geo-location-suggest]"),suggestLocationModel=document.getElementById("suggestLocationModel"),showListVoucherModel=document.getElementById("maskBlackListVoucherModel"),txtLatitude=document.getElementById("OrderViewModel_Latitude"),txtLongitude=document.getElementById("OrderViewModel_Longitude"),btnLatLng=document.getElementById("btnGetCurentLatLng"),(btnLoadLazyListVoucher=document.getElementById("btnShowMoreDiscountCode")).addEventListener("click",function(){Site.ClosePopup(),loadListVoucher()}),myList=document.getElementById("mylist"),txtPhone=document.getElementById("OrderViewModel_PhoneNumber"),txtShipmentTypeEnum=document.getElementById("OrderViewModel_ShipmentTypeEnum"),txtServiceId=document.getElementById("OrderViewModel_ServiceId"),txtShowingUiShipPrice=document.getElementById("OrderViewModel_NormalShipPrice"),(txtAddress=document.getElementById("OrderViewModel_Address")).onkeyup=Site.Debounce(function(){updateRealAddress()},300),txtId=document.getElementById("OrderViewModel_ShippingAddressId"),txtFullName=document.getElementById("OrderViewModel_FullName"),btnSearchWard=document.getElementById("btnSearchWard"),txtVnLocationName=document.getElementById("OrderViewModel_VnLocationName"),txtVnLocationId=document.getElementById("OrderViewModel_VnLocationId"),txtDiscountCode=document.getElementById("OrderViewModel_DiscountCode"),spanDataShipAddress=document.querySelector("[data-ship-address]"),txtDiscountCode.addEventListener("keyup",function(e){Site.Debounce(uploadCart(e.target.value),2e3)}),btnComplete=document.querySelector("#btnComplete"),listLabelNeedPlaceId=document.querySelectorAll("[data-check-paytype]"),btnShowSugestModel=document.getElementById("btnShowSugestModel")}function loadVoucher(e){e!=(txtCode=document.getElementById("txtCode")).value&&(txtCode.value=e,(btnSubmitLoadDiscountCode=document.getElementById("btnSubmitLoadDiscountCode")).click())}function uploadCart(e){console.log("uploadCart:"+e),loadVoucher(e),(txtDiscountcartDetail=document.getElementById("txtDiscountcartDetail")).value=e,(btnReloadShopingCartcartDetail=document.getElementById("btnReloadShopingCartcartDetail")).click()}function loadCleave(){var e=document.getElementById("OrderViewModel_PhoneNumber");phoneNumberCleave=new Cleave(e,{numericOnly:!0})}function loadAutoComplete(){new Awesomplete("#OrderViewModel_FullName",{filter:function(e,t){return Awesomplete.FILTER_CONTAINS(e,t.match(/[^\|]*$/)[0])},item:function(e,t){return Awesomplete.ITEM(e,t.match(/[^\|]*$/)[0])},replace:function(e){var t=this.input.value.match(/^.+\|\s*|/)[0];this.input.value=t+e.value.split("=")[1]}}),document.getElementById("OrderViewModel_FullName").addEventListener("awesomplete-selectcomplete",function(e){var t=e.text.value.split("=")[0];e.target.value=e.text.value.split("=")[1];for(var a=0;a<myList.options.length;a++){var o=myList.options[a];o.id===t&&(txtPhone.value=o.dataset.phone,txtAddress.value=o.dataset.address,txtId.value=t,console.log("autocomplet"),loadCleave())}}),document.getElementById("OrderViewModel_FullName").addEventListener("change",function(e){console.log("change"),loadCleave()})}function updateRealAddress(){spanDataShipAddress.innerHTML=txtAddress.value?(txtAddress.value+", "+txtVnLocationName.value).trim():txtVnLocationName.value}function loadLocationAutoComplete(){var t;document.getElementById("suggestListLocationContainer")?$("#OrderViewModel_VnLocationName").autocomplete({appendTo:"#suggestListLocationContainer",serviceUrl:"/shopingcart/searchlocationcomplete?loadLatLng=True",deferRequestBy:300,minChars:3,noCache:!0,onSelect:function(e){updateRealAddress(e),txtVnLocationId.value=e.data.id,document.querySelector("[data-warehouse-list-container] [name='SelectedWarehouseId']:checked")?selectWarehouse(e.data.latitude,e.data.longitude):updateVnLocation()},triggerSelectOnValidInput:!1,showNoSuggestionNotice:!0,noSuggestionNotice:"Không tìm thấy địa chỉ",formatResult:function(e,t){return"<div class='padding-5  _cursor-poiter' data-lat='"+e.data.latitude+"' data-lng='"+e.data.longitude+"'  data level="+e.data.level+" data-vnlocation-id='"+e.data.id+"'>"+e.value+"</div>"},lookupFilter:function(e,t,a){return new RegExp("\\b"+$.Autocomplete.utils.escapeRegExChars(a),"gi").test(e.value)},onSearchStart:function(e){Site.AddClassElement(btnSearchWard,"active"),txtVnLocationId.value=""},onSearchComplete:function(e,t){Site.RemoveClassElement(btnSearchWard,"active")}}):(t=document.querySelector("[select-place-model]"))&&(t.classList.remove("hide"),txtVnLocationName.addEventListener("focusin",function(e){t.classList.remove("hide")}),document.addEventListener("click",function(e){e.composedPath().includes(vnLocatonNameContainer)||(t.classList.add("hide"),updateVnLocation(!1))},!1))}function processListItemShopingCartcartDetail(){}function updateVnLocation(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],t=txtVnLocationId.value,a=document.querySelector("[data-warehouse-list-container] [name='SelectedWarehouseId']:checked");t==storeLastVnLocationId&&!e||(console.log("Location change"),t!==userLocalStorage.VnLocationId?(txtLatitude.value="",txtLongitude.value=""):(txtLatitude.value=userLocalStorage.Latitude,txtLongitude.value=userLocalStorage.Longitude),storeLastVnLocationId=t,submitLazyLoadDefaultDelivery(+document.querySelector("#frmShipInfo").dataset.money,a?a.value:"",txtAddress.value,txtVnLocationName.value,t,0,+document.querySelector("#frmShipInfo").dataset.weight,null,null,document.getElementById("OrderViewModel_DiscountCode").value))}function SelectShipmentTypeEnum(e){if(!e)return txtShipmentTypeEnum.value=null,txtServiceId.value="",void(txtShowingUiShipPrice.value="");var t=e.value,a=e.dataset.serviceId;console.log({selectedShipmentTypeEnum:t,selectedServiceId:a}),txtShipmentTypeEnum.value=t,txtServiceId.value=a,txtShowingUiShipPrice.value=e.dataset.price,userLocalStorage.selectedShipmentTypeEnum=t,userLocalStorage.serviceId=a,txtVnLocationId.value&&(userLocalStorage.VnLocationId=txtVnLocationId.value,userLocalStorage.VnLocationName=txtVnLocationName.value),LocalStorageHelper.Set(LocalStorageNamesEnum.UserConfigs,userLocalStorage);document.querySelector("#frmShipInfo");document.querySelector("#frmLazyLoadShopingCartcartDetail [name=ShipPriceFromUi]").value=e.dataset.price,document.querySelector("#frmLazyLoadShopingCartcartDetail [name=DiscountCode]").value=txtDiscountCode.value,document.querySelector("#frmLazyLoadShopingCartcartDetail [name=VnLocationId]").value=txtVnLocationId.value,document.querySelector("#frmLazyLoadShopingCartcartDetail [name=PayTypeEnum]").value=document.querySelector("[name='OrderViewModel.PayTypeEnum']:checked").value,console.log("click load cart"),(btnReloadShopingCartcartDetail=document.getElementById("btnReloadShopingCartcartDetail")).click();a=document.querySelector("[data-more-paytype]");if(e.dataset.price){txtVnLocationName.classList.remove("text-warning");var o=document.getElementById("message");o&&(o.classList.add("text-info"),o.classList.remove("text-warning")),a.classList.add("hide");for(r=0;r<listLabelNeedPlaceId.length;r++)(n=listLabelNeedPlaceId[r]).classList.remove("disabled"),n.querySelector("input").removeAttribute("disabled")}else{for(var n,r=0;r<listLabelNeedPlaceId.length;r++)"Cod"===(n=listLabelNeedPlaceId[r]).dataset.checkPaytype?n.querySelector("input").dispatchEvent(new Site.CreateEvent("change")):(n.querySelector("input").disabled="disabled",n.classList.add("disabled"));txtVnLocationName.classList.add("text-warning"),a.classList.remove("hide")}o=document.querySelector("[data-user-rpoint]");o&&(a=o.dataset.userRpoint,o.innerText=WNumbHelper.GetFrNumber(Math.min(discountShipPrice+sumdiscount,a))+" điểm R-Point")}function LazyLoadShipmentTypeEnum(){var e=document.getElementById("shipPrice");e&&(e.innerText="Loadding...");e=document.getElementById("suggestMessage");e&&(e.innerText="Loadding...")}function LazyLoadShipmentComplete(){var e,t,a,o,n=Array.from(document.querySelectorAll("._idListDelivery input[name=ShipmentTypeEnum]"));n.length&&((e=n.map(function(e){return{radio:e,disabled:e.disabled,shipmentTypeEnum:e.value,serviceId:e.dataset.serviceId,price:+e.dataset.price||0,virtualCost:+e.dataset.virtualCost||0}}).filter(function(e){return!e.disabled&&e.shipmentTypeEnum&&0<e.price}).map(function(e){return _objectSpread(_objectSpread({},e),{},{sortPrice:e.price-e.virtualCost})})).length?(e.sort(function(e,t){return e.sortPrice===t.sortPrice?t.shipmentTypeEnum-e.shipmentTypeEnum:e.sortPrice-t.sortPrice}),t=null!==(o=userLocalStorage.ShipmentTypeEnum)&&void 0!==o?o:e[0].shipmentTypeEnum,a=null!==(o=userLocalStorage.ServiceId)&&void 0!==o?o:e[0].serviceId,(o=null!==(o=null!==(o=e.find(function(e){return e.shipmentTypeEnum===t&&e.serviceId===a}))&&void 0!==o?o:e.find(function(e){return e.shipmentTypeEnum===t}))&&void 0!==o?o:0<e.length?e[0]:null)&&checkAndDispatch(o.radio)):checkAndDispatch(n[0]))}function checkAndDispatch(e){e&&(e.checked=!0,e.dispatchEvent(new Site.CreateEvent("change")))}function changeButtonToNextStep(e){btnComplete.innerText=e}function checkLocationValid(e){if(!forceComplete&&!txtVnLocationId.value){var t=document.getElementById("modelMessage");t.innerHTML="Không xác định được: '"+txtVnLocationName.value+"'<br/>";var a=$("#OrderViewModel_VnLocationName").autocomplete().suggestions,o=document.getElementById("modelListLocation");if(o.innerHTML="",a.length){t.innerHTML+="Thay vì NHẬP hãy <strong>CHỌN</strong> đề xuất";for(var n=0;n<a.length;n++){var r=Site.HtmlToElement("<li class='padding _cursor-poiter hover-text-strong' data-location-id='"+a[n].data.id+"'>"+a[n].value+"</li>");r[0].addEventListener("click",function(e){txtVnLocationId.value=e.currentTarget.dataset.locationId,txtVnLocationName.value=e.currentTarget.innerText,updateVnLocation(),Site.ClosePopup()}),o.append(r[0])}}return btnShowSugestModel.click(),void e.abort()}userLocalStorage.OrderPhone=txtPhone.value,userLocalStorage.OrderAddress=txtAddress.value,userLocalStorage.OrderFulName=txtFullName.value,userLocalStorage.VnLocationId!==txtVnLocationId.value&&(userLocalStorage.Latitude=0,userLocalStorage.Longitude=0,userLocalStorage.VnLocationName="",userLocalStorage.VnLocationId=""),LocalStorageHelper.Set(LocalStorageNamesEnum.UserConfigs,userLocalStorage),Site.ShowMaskBlack(1e3,"maskBlackPayment")}function loadFromLocalUserStorange(){var e,t=null!==(e=LocalStorageHelper.Get(LocalStorageNamesEnum.UserConfigs))&&void 0!==e?e:LocalStorageHelper.InitUserConfigs();txtPhone.value=null!==(e=null==t?void 0:t.OrderPhone)&&void 0!==e?e:"",txtAddress.value=null!==(e=null==t?void 0:t.OrderAddress)&&void 0!==e?e:"",txtFullName.value=null!==(e=null==t?void 0:t.OrderFulName)&&void 0!==e?e:"",txtVnLocationName.value=null!==(e=null==t?void 0:t.VnLocationName)&&void 0!==e?e:"",txtVnLocationId.value=null!==(t=null==t?void 0:t.VnLocationId)&&void 0!==t?t:"",txtLatitude.value=null!==(t=null===userLocalStorage||void 0===userLocalStorage?void 0:userLocalStorage.Latitude)&&void 0!==t?t:0,txtLongitude.value=null!==(t=null===userLocalStorage||void 0===userLocalStorage?void 0:userLocalStorage.Longitude)&&void 0!==t?t:0,vnLocationSelectFormLazyLoadData(txtVnLocationId.value)}function warehouseSelected(){var e=document.querySelector("#OrderViewModel_SelectedWarehouseId"),t=document.querySelector("[data-warehouse-list-container] [name='SelectedWarehouseId']:checked");e.value=null==t?void 0:t.value,updateVnLocation(!0)}function submitLazyLoadDefaultDelivery(e,t,a,o,n,r,i,l,c,d){document.querySelector("#frmLazyLoadDeliveryNormal")&&(null!=l&&(document.querySelector("#frmLazyLoadDeliveryNormal [name=ShipmentTypeEnum]").value=l),document.querySelector("#frmLazyLoadDeliveryNormal [name=TotalGoodsMoney]").value=e,document.querySelector("#frmLazyLoadDeliveryNormal [name=WarehouseId]").value=t,document.querySelector("#frmLazyLoadDeliveryNormal [name=DropAddress]").value=a,document.querySelector("#frmLazyLoadDeliveryNormal [name=DropVnLocation]").value=o,document.querySelector("#frmLazyLoadDeliveryNormal [name=VnDropLocationId]").value=n,document.querySelector("#frmLazyLoadDeliveryNormal [name=Volumn]").value=r,document.querySelector("#frmLazyLoadDeliveryNormal [name=Weight]").value=i,document.querySelector("#frmLazyLoadDeliveryNormal [name=DiscountCode]").value=d,document.getElementById("btnLazyLoadDeliveryNormalSelector").click())}document.addEventListener("DOMContentLoaded",_asyncToGenerator(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return userLocalStorage=null!==(t=LocalStorageHelper.Get(LocalStorageNamesEnum.UserConfigs))&&void 0!==t?t:LocalStorageHelper.InitUserConfigs(),initPayment(),loadCleave(),loadAutoComplete(),loadLocationAutoComplete(),updateRealAddress(),vnLocatonNameContainer=document.querySelector("[data-vn-location]"),(isAuthenticated="True"==!!document.querySelector("[data-authenticated]").dataset.authenticated)||loadFromLocalUserStorange(),document.getElementById("btnSubmitLoadDiscountCode").click(),e.next=12,processGetLatlongBtn();case 12:console.log("Xong rồi nè"),updateVnLocation(!0);case 14:case"end":return e.stop()}},e)})));